{
  "createdAt": "2025-12-12T21:21:31.876Z",
  "id": "af4tqT4UNTFznKEu",
  "name": "sw_experts_v2",
  "description": null,
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "usuario_id"
            },
            {
              "name": "chat_id"
            },
            {
              "name": "mensagens"
            },
            {
              "name": "data_conversa"
            },
            {
              "name": "usr_nome_preferencia"
            },
            {
              "name": "total_interactions",
              "type": "number"
            }
          ]
        }
      },
      "id": "4cdf6fc0-46ff-4b6b-81a0-20208265f644",
      "name": "start",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        -2768,
        -256
      ]
    },
    {
      "parameters": {
        "content": "## sw_experts_v2 - Hub Consolidado\n\n### Fluxo\n1. **Resumo Conversa** (IA) ‚Üí valida contexto\n2. **IF** tem_contexto = true\n3. **Experts em paralelo:**\n   - Sabotadores (busca cat√°logo + IA + grava)\n   - PANAS/Emo√ß√µes (IA + grava)\n   - Humor/Energia (IA + grava)\n   - Big Five (busca hist√≥rico + IA + grava)\n   - Insights (IA + grava)\n4. **Atualiza usr_chat** (resumo, status)\n5. **Log final** em log_experts\n\n### Vantagens\n- Contexto compartilhado\n- Economia de tokens\n- Menos overhead de chamadas\n- Manuten√ß√£o centralizada\n\n### Regras\n- Se tem_contexto=false ‚Üí pula experts\n- Cada expert grava em sua tabela\n- Log √∫nico por execu√ß√£o",
        "height": 864,
        "width": 624,
        "color": 7
      },
      "id": "64928828-725e-48a3-91ad-e8afc9e656e0",
      "name": "Regras sw_experts_v2",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -3968,
        -400
      ],
      "width": 380,
      "height": 500
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- Buscar dados do chat e resumo existente\nSELECT\n  c.id,\n  c.resumo_conversa,\n  c.tem_reflexao,\n  c.total_palavras_usuario,\n  u.nome_preferencia\nFROM usr_chat c\nJOIN usuarios u ON u.id = c.usuario_id\nWHERE c.id = $1::uuid;",
        "options": {
          "queryReplacement": "={{ [$json.chat_id] }}"
        }
      },
      "id": "961eecee-664c-452f-949d-213ea311299f",
      "name": "Buscar Dados Chat",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -2576,
        -256
      ],
      "credentials": {
        "postgres": {
          "id": "8ySWxtSO7gYK5uue",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "maxTokens": 1500,
          "temperature": 0.2
        }
      },
      "id": "a7954d87-1f48-430c-bf25-0329ac1f41af",
      "name": "LLM Resumo",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        -2400,
        -32
      ],
      "credentials": {
        "openRouterApi": {
          "id": "rSnkOnnAHyfayLJt",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"tem_contexto\": true,\n  \"tem_reflexao\": true,\n  \"justificativa\": \"string\",\n  \"total_palavras_delta\": 150,\n  \"resumo_atualizado\": \"string\"\n}"
      },
      "id": "61827f2d-fb95-457a-9f37-83c1ebeaf2bd",
      "name": "Parser Resumo",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -2240,
        -32
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "condition-contexto",
              "leftValue": "={{ $json.output.tem_contexto }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "48c0b979-82a6-42c6-bcbc-3054d9c621c4",
      "name": "Tem Contexto?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -2112,
        -256
      ]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT id, nome, descricao FROM sabotadores_catalogo ORDER BY nome;",
        "options": {}
      },
      "id": "b2c09345-ac3d-4a69-a723-c2c6a597af6b",
      "name": "Buscar Cat√°logo Sabotadores",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -1296,
        -704
      ],
      "credentials": {
        "postgres": {
          "id": "8ySWxtSO7gYK5uue",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "maxTokens": 2000,
          "temperature": 0.2
        }
      },
      "id": "2c00d3fd-1a82-4228-b960-890758c57f91",
      "name": "LLM Sabotadores",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        -928,
        -512
      ],
      "credentials": {
        "openRouterApi": {
          "id": "rSnkOnnAHyfayLJt",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"sabotadores_detectados\": [\n    {\n      \"sabotador_id\": \"critico\",\n      \"nome_pt\": \"Cr√≠tico\",\n      \"intensidade\": 75,\n      \"contexto\": \"relacionamentos\",\n      \"frases_gatilho\": [\n        \"me senti desprezado\",\n        \"ela n√£o gostava mais de mim\",\n        \"n√£o encontrei algu√©m que vale a pena\"\n      ],\n      \"insights\": \"Autocr√≠tica intensa sobre valor pessoal e capacidade de ser amado. Padr√£o recorrente de d√∫vida sobre pr√≥prio valor em relacionamentos.\",\n      \"confiabilidade\": 90,\n      \"apelido\": \"Sr. Exigente\",\n      \"contramedida\": \"Praticar autocompaix√£o: falar consigo como falaria com um amigo querido por 3 minutos\"\n    }\n  ]\n}",
        "autoFix": true
      },
      "id": "55321f67-b7d0-43c3-918a-802fa92578e1",
      "name": "Parser Sabotadores",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -672,
        -544
      ]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- =====================================================\n-- CORRE√á√ÉO: Query UPSERT para Gravar Sabotadores\n-- Workflow: sw_experts_v2\n-- Node: Gravar Sabotadores (821c8d86-c520-48ca-a45a-ba36eb8e1379)\n-- =====================================================\n\n-- UPSERT sabotadores: 1 registro por (usuario, sabotador, chat)\nWITH sabotadores_input AS (\n  SELECT \n    $1::uuid as usuario_id,\n    $2::uuid as chat_id,\n    $3::jsonb as sabotadores_array\n)\nINSERT INTO usuarios_sabotadores (\n  usuario_id,\n  chat_id,\n  sabotador_id,\n  intensidade_media,\n  intensidade_acumulada_dia,\n  total_deteccoes_dia,\n  total_deteccoes,\n  contexto_principal,\n  insight_atual,\n  apelido_personalizado,\n  contramedida_ativa,\n  sabotador_predominante,\n  data_ultima_atividade\n)\nSELECT \n  si.usuario_id,\n  si.chat_id,\n  (sabotador->>'sabotador_id')::varchar(30),\n  (sabotador->>'intensidade')::integer,\n  (sabotador->>'intensidade')::integer,\n  1,\n  1,\n  (sabotador->>'contexto')::varchar(100),\n  (sabotador->>'insights')::text,\n  (sabotador->>'apelido')::varchar(50),\n  (sabotador->>'contramedida')::text,\n  true,\n  CURRENT_DATE\nFROM sabotadores_input si,\n     jsonb_array_elements(si.sabotadores_array) as sabotador\nWHERE (sabotador->>'intensidade')::integer >= 30\nON CONFLICT (usuario_id, sabotador_id, chat_id) DO UPDATE SET\n  total_deteccoes_dia = usuarios_sabotadores.total_deteccoes_dia + 1,\n  total_deteccoes = usuarios_sabotadores.total_deteccoes + 1,\n  intensidade_acumulada_dia = usuarios_sabotadores.intensidade_acumulada_dia + EXCLUDED.intensidade_media,\n  intensidade_media = (usuarios_sabotadores.intensidade_acumulada_dia + EXCLUDED.intensidade_media) / \n                      (usuarios_sabotadores.total_deteccoes_dia + 1),\n  contexto_principal = CASE \n    WHEN EXCLUDED.intensidade_media > usuarios_sabotadores.intensidade_media \n    THEN EXCLUDED.contexto_principal ELSE usuarios_sabotadores.contexto_principal END,\n  insight_atual = CASE \n    WHEN EXCLUDED.intensidade_media > usuarios_sabotadores.intensidade_media \n    THEN EXCLUDED.insight_atual ELSE usuarios_sabotadores.insight_atual END,\n  contramedida_ativa = CASE \n    WHEN EXCLUDED.intensidade_media > usuarios_sabotadores.intensidade_media \n    THEN EXCLUDED.contramedida_ativa ELSE usuarios_sabotadores.contramedida_ativa END,\n  data_ultima_atividade = CURRENT_DATE,\n  atualizado_em = NOW()\nRETURNING id, sabotador_id, intensidade_media, total_deteccoes_dia;\n",
        "options": {
          "queryReplacement": "={{ [\n  $('start').first().json.usuario_id,\n  $('start').first().json.chat_id,\n  JSON.stringify($json.output.sabotadores_detectados || [])\n] }}"
        }
      },
      "id": "821c8d86-c520-48ca-a45a-ba36eb8e1379",
      "name": "Gravar Sabotadores",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -512,
        -768
      ],
      "credentials": {
        "postgres": {
          "id": "8ySWxtSO7gYK5uue",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "maxTokens": 1500,
          "temperature": 0.2
        }
      },
      "id": "5851254c-d9d6-450a-b672-74b62f704e28",
      "name": "LLM PANAS",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        -1136,
        624
      ],
      "credentials": {
        "openRouterApi": {
          "id": "rSnkOnnAHyfayLJt",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"emocoes_detectadas\": [\n    {\n      \"emocao_id\": \"sadness\",\n      \"nome_pt\": \"tristeza\",\n      \"intensidade\": 85,\n      \"contexto\": \"NEGATIVA\",\n      \"evidencias\": [\"saudade\", \"solid√£o\", \"ang√∫stia\", \"me senti desprezado\"]\n    },\n    {\n      \"emocao_id\": \"anticipation\",\n      \"nome_pt\": \"expectativa\",\n      \"intensidade\": 40,\n      \"contexto\": \"POSITIVA\",\n      \"evidencias\": [\"projetos pessoais\", \"acompanhamento terap√™utico\"]\n    },\n    {\n      \"emocao_id\": \"fear\",\n      \"nome_pt\": \"medo\",\n      \"intensidade\": 50,\n      \"contexto\": \"NEGATIVA\",\n      \"evidencias\": [\"preocupa√ß√£o\", \"inseguran√ßa\"]\n    }\n  ],\n  \"classificacao_panas\": \"negativa\",\n  \"justificativa_panas\": \"Predomin√¢ncia de tristeza (85) relacionada a perda, solid√£o e rejei√ß√£o. Expectativa presente mas em menor intensidade.\",\n  \"confianca_analise\": 90\n}",
        "autoFix": true
      },
      "id": "805c0e1d-b70e-4471-83c2-3163fd74f135",
      "name": "Parser PANAS",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -960,
        560
      ]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- UPSERT emo√ß√µes: 1 registro por (chat_id, emocao_id) com m√©dia de intensidade\nWITH emocoes_json AS (\n  SELECT \n    $1::uuid AS usuario_id,\n    $2::uuid AS chat_id,\n    $3::date AS data_conversa,\n    jsonb_array_elements($4::jsonb) AS emocao\n)\nINSERT INTO usuarios_emocoes (\n  usuario_id, chat_id, emocao_id, intensidade, intensidade_acumulada,\n  ocorrencias_dia, detectado_em, contexto, evidencias, emocao_pt\n)\nSELECT \n  ej.usuario_id, ej.chat_id,\n  (ej.emocao->>'emocao_id')::varchar(20),\n  (ej.emocao->>'intensidade')::integer,\n  (ej.emocao->>'intensidade')::integer,\n  1,\n  ej.data_conversa,\n  (ej.emocao->>'contexto')::varchar(100),\n  (ej.emocao->>'evidencias')::jsonb,\n  (ej.emocao->>'nome_pt')::varchar(20)\nFROM emocoes_json ej\nWHERE (ej.emocao->>'intensidade')::integer >= 45\nON CONFLICT (chat_id, emocao_id) DO UPDATE SET\n  ocorrencias_dia = usuarios_emocoes.ocorrencias_dia + 1,\n  intensidade_acumulada = usuarios_emocoes.intensidade_acumulada + EXCLUDED.intensidade,\n  intensidade = (usuarios_emocoes.intensidade_acumulada + EXCLUDED.intensidade) / \n                (usuarios_emocoes.ocorrencias_dia + 1),\n  evidencias = usuarios_emocoes.evidencias || EXCLUDED.evidencias,\n  contexto = EXCLUDED.contexto,\n  criado_em = NOW()\nRETURNING id, emocao_id, intensidade, ocorrencias_dia;",
        "options": {
          "queryReplacement": "={{ [\n  $('start').first().json.usuario_id,\n  $('start').first().json.chat_id,\n  ((v) => v ? new Date(v).toISOString().slice(0,10) : null)($('start').first().json.data_conversa),\n  JSON.stringify($json.output.emocoes_detectadas || [])\n] }}"
        }
      },
      "id": "a46656a8-ead2-4fc1-b342-1b729689038b",
      "name": "Gravar Emo√ß√µes",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -800,
        368
      ],
      "credentials": {
        "postgres": {
          "id": "8ySWxtSO7gYK5uue",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "maxTokens": 1000,
          "temperature": 0.2
        }
      },
      "id": "3d509572-1b42-4997-a4fd-eb1bca699773",
      "name": "LLM Humor",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        -1152,
        1184
      ],
      "credentials": {
        "openRouterApi": {
          "id": "rSnkOnnAHyfayLJt",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"humor_dia\": 4,\n  \"energia_nivel\": 6,\n  \"variacao_humor\": \"descendente\",\n  \"variacao_energia\": \"estavel\",\n  \"periodo_dia\": \"tarde\",\n  \"justificativa_humor\": \"Usu√°rio come√ßou o dia produtivo e animado, mas ao final relata tristeza profunda, ang√∫stia e desmotiva√ß√£o ap√≥s ver fotos da ex-mulher\",\n  \"justificativa_energia\": \"Menciona que caminhou bastante, fez almo√ßo, trabalhou no app - energia moderada/boa, mas manteve disposi√ß√£o f√≠sica apesar da queda emocional\",\n  \"evidencias_textuais\": [\n    \"dia estava muito bom hoje, muito produtivo\",\n    \"estava disposto, animado\",\n    \"bateu uma coisa muito ruim\",\n    \"ang√∫stia, uma tristeza muito grande\",\n    \"muito desmotivado e desanimado\"\n  ],\n  \"confianca_analise\": 95\n}",
        "autoFix": true
      },
      "id": "f6f7478c-9e2e-48f7-b515-7966f4dffefc",
      "name": "Parser Humor",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -944,
        1104
      ]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- UPSERT humor/energia: 1 registro por chat com m√©dia\nINSERT INTO usuarios_humor_energia (\n  usuario_id, chat_id, data_registro, hora_registro,\n  periodo_dia, humor_dia, humor_acumulado, energia_nivel, energia_acumulada,\n  ocorrencias_dia, variacao_humor, variacao_energia,\n  justificativa_humor, justificativa_energia,\n  evidencias_textuais, confianca_analise\n)\nVALUES (\n  $1::uuid, $2::uuid, $3::date, CURRENT_TIME,\n  $4, $5::integer, $5::integer, $6::integer, $6::integer,\n  1, $7, $8, $9, $10, $11::jsonb, $12::integer\n)\nON CONFLICT (chat_id) DO UPDATE SET\n  ocorrencias_dia = usuarios_humor_energia.ocorrencias_dia + 1,\n  humor_acumulado = usuarios_humor_energia.humor_acumulado + EXCLUDED.humor_dia,\n  energia_acumulada = usuarios_humor_energia.energia_acumulada + EXCLUDED.energia_nivel,\n  humor_dia = (usuarios_humor_energia.humor_acumulado + EXCLUDED.humor_dia) / \n              (usuarios_humor_energia.ocorrencias_dia + 1),\n  energia_nivel = (usuarios_humor_energia.energia_acumulada + EXCLUDED.energia_nivel) / \n                  (usuarios_humor_energia.ocorrencias_dia + 1),\n  hora_registro = CURRENT_TIME,\n  periodo_dia = EXCLUDED.periodo_dia,\n  variacao_humor = EXCLUDED.variacao_humor,\n  variacao_energia = EXCLUDED.variacao_energia,\n  justificativa_humor = EXCLUDED.justificativa_humor,\n  justificativa_energia = EXCLUDED.justificativa_energia,\n  evidencias_textuais = usuarios_humor_energia.evidencias_textuais || EXCLUDED.evidencias_textuais,\n  confianca_analise = EXCLUDED.confianca_analise,\n  detectado_em = NOW()\nRETURNING id, humor_dia, energia_nivel, ocorrencias_dia;",
        "options": {
          "queryReplacement": "={{ [\n  $('start').first().json.usuario_id,\n  $('start').first().json.chat_id,\n  ((v) => v ? new Date(v).toISOString().slice(0,10) : null)($('start').first().json.data_conversa),\n  $json.output.periodo_dia,\n  $json.output.humor_dia,\n  $json.output.energia_nivel,\n  $json.output.variacao_humor,\n  $json.output.variacao_energia,\n  JSON.stringify($json.output.justificativa_humor),\n  JSON.stringify($json.output.justificativa_energia),\n  JSON.stringify($json.output.evidencias_textuais || []),\n  $json.output.confianca_analise\n] }}"
        }
      },
      "id": "f2c64a21-cc2d-41c8-8f97-d6a2bae59c42",
      "name": "Gravar Humor",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -736,
        912
      ],
      "credentials": {
        "postgres": {
          "id": "8ySWxtSO7gYK5uue",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "HDTrSrJiBIv2FFks",
          "mode": "list",
          "cachedResultUrl": "/workflow/HDTrSrJiBIv2FFks",
          "cachedResultName": "sw_get_history"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "usr_id": "={{ $('start').first().json.usuario_id }}"
          }
        },
        "options": {
          "waitForSubWorkflow": true
        }
      },
      "id": "e9593eca-5e96-4244-9124-77126bb8c55e",
      "name": "Buscar Hist√≥rico BigFive",
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        -1152,
        -1232
      ],
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "functionCode": "const startData = $items('start')[0]?.json ?? {};\nconst historyItems = $items('Buscar Hist√≥rico BigFive').map((item) => item.json).filter(Boolean);\nconst formatDate = (value) => {\n  if (!value) return null;\n  const parsed = new Date(value);\n  if (Number.isNaN(parsed.getTime())) return value;\n  return parsed.toISOString().slice(0, 10);\n};\nconst historicoOrdenado = historyItems\n  .map((entry) => ({\n    data: formatDate(entry.data_conversa),\n    resumo: entry.resumo_conversa ?? ''\n  }))\n  .filter((entry) => entry.data || entry.resumo)\n  .sort((a, b) => {\n    if (!a.data || !b.data) return 0;\n    return a.data < b.data ? 1 : -1;\n  });\nconst historicoResumo = historicoOrdenado.length\n  ? historicoOrdenado\n      .map((entry) => `- ${entry.data ?? 'data indeterminada'}: ${entry.resumo || 'sem resumo dispon√≠vel'}`)\n      .join('\\n')\n  : 'Sem hist√≥rico relevante nos √∫ltimos 5 dias.';\nreturn [\n  {\n    json: {\n      ...startData,\n      historico_resumo: historicoResumo,\n      historico_itens: historicoOrdenado\n    }\n  }\n];"
      },
      "id": "81e9e08e-7bb4-4b68-ada2-acde96a4fa1b",
      "name": "Preparar Contexto BigFive",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -944,
        -1232
      ]
    },
    {
      "parameters": {
        "options": {
          "maxTokens": 2000,
          "temperature": 0.2
        }
      },
      "id": "e95da6aa-2f82-4b08-8873-518ebaabba22",
      "name": "LLM BigFive",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        -800,
        -1024
      ],
      "credentials": {
        "openRouterApi": {
          "id": "rSnkOnnAHyfayLJt",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"big_five\": {\n    \"openness\": {\"score\": 62, \"confiabilidade\": 78, \"evidencias\": [\"gosto de explorar ideias novas\", \"procuro alternativas criativas\"]},\n    \"conscientiousness\": {\"score\": 54, \"confiabilidade\": 65, \"evidencias\": [\"monitorei meu plano\", \"organizei meus passos\"]},\n    \"extraversion\": {\"score\": 41, \"confiabilidade\": 60, \"evidencias\": [\"prefiro ficar na minha\", \"evitei encontros\"]},\n    \"agreeableness\": {\"score\": 70, \"confiabilidade\": 72, \"evidencias\": [\"procurei conciliar\", \"quero evitar conflito\"]},\n    \"neuroticism\": {\"score\": 58, \"confiabilidade\": 68, \"evidencias\": [\"fiquei ansioso com perdas\", \"preocupa√ß√£o constante\"]}\n  },\n  \"perfil_primario\": \"agreeableness\",\n  \"resumo_perfil\": \"Pessoa colaborativa, aberta a di√°logos e solu√ß√µes conjuntas, mantendo equil√≠brio em disciplina e energia social.\",\n  \"insuficiente\": false\n}",
        "autoFix": true
      },
      "id": "57519c37-b947-4c13-98aa-f5284560c2e3",
      "name": "Parser BigFive",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -640,
        -1024
      ]
    },
    {
      "parameters": {
        "functionCode": "const startItem = $items(\"start\")[0]?.json ?? {};\nconst preparado = $items(\"Preparar Contexto BigFive\")[0]?.json ?? {};\nconst payload = $json.output ?? {};\nconst traits = ['openness','conscientiousness','extraversion','agreeableness','neuroticism'];\nconst scores = traits.map((key) => {\n  const data = payload.big_five?.[key] ?? {};\n  const score = Number(data.score);\n  const confianca = Number(data.confiabilidade);\n  return {\n    id: key,\n    score: Number.isFinite(score) ? score : null,\n    confiabilidade: Number.isFinite(confianca) ? confianca : null\n  };\n});\nconst sorted = [...scores].sort((a, b) => (b.score ?? 0) - (a.score ?? 0));\nconst validTraits = new Set(traits);\nconst originalPrimary = payload.perfil_primario ?? null;\nlet primary = originalPrimary;\nif (!primary || primary === 'misto' || !validTraits.has(primary)) {\n  primary = sorted[0]?.id ?? null;\n}\nlet secondary = sorted.find((entry) => entry.id !== primary)?.id ?? null;\nif (!secondary && sorted[1]) {\n  secondary = sorted[1].id;\n}\nconst sumConfianca = scores.reduce((acc, entry) => acc + (entry.confiabilidade ?? 0), 0);\nconst confiancaMedia = scores.length ? Math.round(sumConfianca / scores.length) : null;\nconst rawDate = startItem.data_conversa || preparado.data_conversa;\nlet dataConversa = null;\nif (rawDate) {\n  const parsed = new Date(rawDate);\n  if (!isNaN(parsed)) {\n    dataConversa = parsed.toISOString().slice(0, 10);\n  }\n}\nif (!dataConversa) {\n  const now = new Date();\n  dataConversa = now.toISOString().slice(0, 10);\n}\nconst result = {\n  usuario_id: startItem.usuario_id ?? null,\n  chat_id: startItem.chat_id ?? null,\n  data_conversa: dataConversa,\n  perfil_original: originalPrimary,\n  perfil_primario: primary,\n  perfil_secundario: secondary,\n  resumo_perfil: payload.resumo_perfil ?? null,\n  insuficiente: Boolean(payload.insuficiente),\n  confianca_media: confiancaMedia,\n  raw_resposta: payload\n};\nfor (const trait of traits) {\n  const data = payload.big_five?.[trait] ?? {};\n  const score = Number(data.score);\n  const confianca = Number(data.confiabilidade);\n  result[`score_${trait}`] = Number.isFinite(score) ? score : null;\n  result[`confianca_${trait}`] = Number.isFinite(confianca) ? confianca : null;\n}\nreturn [{ json: result }];"
      },
      "id": "f654373a-50de-4b75-ac13-317679fae46a",
      "name": "Preparar Registro BigFive",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -416,
        -1232
      ]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "INSERT INTO usuarios_perfis (\n  usuario_id,\n  chat_id,\n  data_conversa,\n  perfil_original,\n  perfil_primario,\n  perfil_secundario,\n  resumo_perfil,\n  insuficiente,\n  score_openness,\n  score_conscientiousness,\n  score_extraversion,\n  score_agreeableness,\n  score_neuroticism,\n  confianca_openness,\n  confianca_conscientiousness,\n  confianca_extraversion,\n  confianca_agreeableness,\n  confianca_neuroticism,\n  confianca_media,\n  raw_resposta,\n  criado_em,\n  atualizado_em\n)\nVALUES (\n  $1::uuid,\n  $2::uuid,\n  $3::date,\n  $4::varchar,\n  $5::varchar,\n  $6::varchar,\n  $7::text,\n  $8::boolean,\n  $9::integer,\n  $10::integer,\n  $11::integer,\n  $12::integer,\n  $13::integer,\n  $14::integer,\n  $15::integer,\n  $16::integer,\n  $17::integer,\n  $18::integer,\n  $19::integer,\n  $20::jsonb,\n  NOW(),\n  NOW()\n)\nON CONFLICT (chat_id) DO UPDATE SET\n  perfil_original = EXCLUDED.perfil_original,\n  perfil_primario = EXCLUDED.perfil_primario,\n  perfil_secundario = EXCLUDED.perfil_secundario,\n  resumo_perfil = EXCLUDED.resumo_perfil,\n  insuficiente = EXCLUDED.insuficiente,\n  score_openness = EXCLUDED.score_openness,\n  score_conscientiousness = EXCLUDED.score_conscientiousness,\n  score_extraversion = EXCLUDED.score_extraversion,\n  score_agreeableness = EXCLUDED.score_agreeableness,\n  score_neuroticism = EXCLUDED.score_neuroticism,\n  confianca_openness = EXCLUDED.confianca_openness,\n  confianca_conscientiousness = EXCLUDED.confianca_conscientiousness,\n  confianca_extraversion = EXCLUDED.confianca_extraversion,\n  confianca_agreeableness = EXCLUDED.confianca_agreeableness,\n  confianca_neuroticism = EXCLUDED.confianca_neuroticism,\n  confianca_media = EXCLUDED.confianca_media,\n  raw_resposta = EXCLUDED.raw_resposta,\n  atualizado_em = NOW()\nRETURNING id, perfil_primario;",
        "options": {
          "queryReplacement": "={{ [\n  $json.usuario_id ?? null,\n  $json.chat_id ?? null,\n  $json.data_conversa ?? null,\n  $json.perfil_original ?? null,\n  $json.perfil_primario ?? null,\n  $json.perfil_secundario ?? null,\n  $json.resumo_perfil ?? null,\n  $json.insuficiente === true,\n  $json.score_openness ?? null,\n  $json.score_conscientiousness ?? null,\n  $json.score_extraversion ?? null,\n  $json.score_agreeableness ?? null,\n  $json.score_neuroticism ?? null,\n  $json.confianca_openness ?? null,\n  $json.confianca_conscientiousness ?? null,\n  $json.confianca_extraversion ?? null,\n  $json.confianca_agreeableness ?? null,\n  $json.confianca_neuroticism ?? null,\n  $json.confianca_media ?? null,\n  $json.raw_resposta ?? {}\n] }}"
        }
      },
      "id": "2c4ca0be-2a31-4515-92c6-310fa61ae282",
      "name": "Gravar BigFive",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -224,
        -1232
      ],
      "credentials": {
        "postgres": {
          "id": "8ySWxtSO7gYK5uue",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "maxTokens": 2000,
          "temperature": 0.3
        }
      },
      "id": "fdfe78f1-6ed2-48a5-9823-1bf194089273",
      "name": "LLM Insights",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        -1152,
        112
      ],
      "credentials": {
        "openRouterApi": {
          "id": "rSnkOnnAHyfayLJt",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "[{\"tipo\":\"padrao\",\"categoria\":\"emocional\",\"titulo\":\"Ciclo Produtividade\",\"icone\":\"üîÑ\",\"prioridade\":\"media\",\"resumo_situacao\":\"Resumo\",\"feedback_positivo\":\"Positivo\",\"feedback_desenvolvimento\":\"Desenvolvimento\",\"feedback_motivacional\":\"Motivacional\",\"recursos_sugeridos\":[{\"tipo\":\"tecnica\",\"nome\":\"Nome\",\"descricao\":\"Desc\",\"aplicacao_pratica\":\"Aplica√ß√£o\"}],\"baseado_em\":[\"ev1\"]}]",
        "autoFix": true
      },
      "id": "65b40be6-f5e7-417a-b793-acdceaa64d33",
      "name": "Parser Insights",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -816,
        16
      ]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "select tipo, categoria, titulo, descricao, prioridade from insights where usuario_id = $1 limit 15 ",
        "options": {
          "queryReplacement": "={{ $('start').first().json.usuario_id }}"
        }
      },
      "id": "a286e857-68b4-43bb-add9-54364267e809",
      "name": "get_user_insight",
      "type": "n8n-nodes-base.postgresTool",
      "typeVersion": 2.6,
      "position": [
        -960,
        0
      ],
      "credentials": {
        "postgres": {
          "id": "8ySWxtSO7gYK5uue",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- UPSERT insight: 1 registro por chat (sobrescreve)\nWITH insight_data AS (\n  SELECT \n    $1::uuid as usuario_id,\n    $2::uuid as chat_id,\n    elem->>'tipo' as tipo,\n    elem->>'categoria' as categoria,\n    elem->>'titulo' as titulo,\n    elem->>'resumo_situacao' as resumo_situacao,\n    elem->>'icone' as icone,\n    elem->>'prioridade' as prioridade,\n    elem->>'feedback_positivo' as feedback_positivo,\n    elem->>'feedback_desenvolvimento' as feedback_desenvolvimento,\n    elem->>'feedback_motivacional' as feedback_motivacional,\n    elem->'recursos_sugeridos' as recursos_sugeridos,\n    elem->'baseado_em' as baseado_em\n  FROM jsonb_array_elements($3::jsonb) AS elem\n  LIMIT 1\n)\nINSERT INTO insights (\n  usuario_id, chat_id, tipo, categoria, titulo, descricao, icone, prioridade, ativo,\n  resumo_situacao, feedback_positivo, feedback_desenvolvimento, feedback_motivacional,\n  recursos_sugeridos, baseado_em\n)\nSELECT \n  usuario_id, chat_id, tipo, categoria, titulo, resumo_situacao, icone, prioridade, true,\n  resumo_situacao, feedback_positivo, feedback_desenvolvimento, feedback_motivacional,\n  recursos_sugeridos, ARRAY(SELECT jsonb_array_elements_text(baseado_em))\nFROM insight_data\nON CONFLICT (chat_id) DO UPDATE SET\n  tipo = EXCLUDED.tipo,\n  categoria = EXCLUDED.categoria,\n  titulo = EXCLUDED.titulo,\n  descricao = EXCLUDED.descricao,\n  icone = EXCLUDED.icone,\n  prioridade = EXCLUDED.prioridade,\n  resumo_situacao = EXCLUDED.resumo_situacao,\n  feedback_positivo = EXCLUDED.feedback_positivo,\n  feedback_desenvolvimento = EXCLUDED.feedback_desenvolvimento,\n  feedback_motivacional = EXCLUDED.feedback_motivacional,\n  recursos_sugeridos = EXCLUDED.recursos_sugeridos,\n  baseado_em = EXCLUDED.baseado_em,\n  criado_em = NOW()\nRETURNING id, tipo, categoria, titulo, prioridade;",
        "options": {
          "queryReplacement": "={{ [\n  $('start').first().json.usuario_id,\n  $('start').first().json.chat_id,\n  JSON.stringify($json.output || [])\n] }}"
        }
      },
      "id": "bd1b69a9-0d1f-4e06-876a-fa4eda941001",
      "name": "Gravar Insights",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -800,
        -192
      ],
      "credentials": {
        "postgres": {
          "id": "8ySWxtSO7gYK5uue",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- Atualizar usr_chat com resumo e status\nUPDATE usr_chat SET\n  resumo_conversa = $2,\n  tem_reflexao = $3,\n  total_palavras_usuario = COALESCE(total_palavras_usuario, 0) + $4,\n  status = 'finalizado',\n  horario_fim = NOW(),\n  atualizado_em = NOW()\nWHERE id = $1::uuid\nRETURNING id, status;",
        "options": {
          "queryReplacement": "={{ [\n  $('start').first().json.chat_id,\n  $('resumo conversa').first().json.output.resumo_atualizado,\n  $('resumo conversa').first().json.output.tem_reflexao,\n  $('resumo conversa').first().json.output.total_palavras_delta || 0\n] }}"
        }
      },
      "id": "915e6d19-c46e-412e-9df4-81633f1e6edf",
      "name": "Atualizar usr_chat",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -2752,
        288
      ],
      "credentials": {
        "postgres": {
          "id": "8ySWxtSO7gYK5uue",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- Registrar processamento final no log_experts\nINSERT INTO log_experts (usuario_id, chat_id, expert_name, ultima_interaction, historico, criado_em, atualizado_em)\nVALUES (\n  $1::uuid,\n  $2::uuid,\n  'sw_experts_v2',\n  $3::int,\n  jsonb_build_array(jsonb_build_object(\n    'de', 0,\n    'ate', $3::int,\n    'novas', $3::int,\n    'em', NOW(),\n    'tem_contexto', $4::boolean,\n    'tem_reflexao', $5::boolean,\n    'experts_executados', ARRAY['resumo','sabotadores','panas','humor','bigfive','insights']\n  )),\n  NOW(),\n  NOW()\n)\nON CONFLICT (chat_id, expert_name) DO UPDATE SET\n  historico = log_experts.historico || jsonb_build_array(jsonb_build_object(\n    'de', log_experts.ultima_interaction,\n    'ate', $3::int,\n    'novas', $3::int - log_experts.ultima_interaction,\n    'em', NOW(),\n    'tem_contexto', $4::boolean,\n    'tem_reflexao', $5::boolean,\n    'experts_executados', ARRAY['resumo','sabotadores','panas','humor','bigfive','insights']\n  )),\n  ultima_interaction = $3::int,\n  atualizado_em = NOW()\nRETURNING id;",
        "options": {
          "queryReplacement": "={{ [\n  $('start').first().json.usuario_id,\n  $('start').first().json.chat_id,\n  $('start').first().json.total_interactions,\n  $('resumo conversa').first().json.output.tem_contexto,\n  $('resumo conversa').first().json.output.tem_reflexao\n] }}"
        }
      },
      "id": "819b7283-7f65-4a12-9e9b-a951b63a10db",
      "name": "Registrar Log Final",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -2544,
        288
      ],
      "credentials": {
        "postgres": {
          "id": "8ySWxtSO7gYK5uue",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- Atualizar apenas resumo quando n√£o tem contexto\nUPDATE usr_chat SET\n  resumo_conversa = $2,\n  atualizado_em = NOW()\nWHERE id = $1::uuid\nRETURNING id;",
        "options": {
          "queryReplacement": "={{ [\n  $('start').first().json.chat_id,\n  $('resumo conversa').first().json.output.resumo_atualizado\n] }}"
        }
      },
      "id": "30fadd0a-3038-4976-8b49-4dc768671908",
      "name": "Atualizar Resumo (sem contexto)",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -2640,
        80
      ],
      "credentials": {
        "postgres": {
          "id": "8ySWxtSO7gYK5uue",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "content": "## Expert - sabotadores",
        "height": 464,
        "width": 1120,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1440,
        -800
      ],
      "id": "b02959e3-a95b-4585-a778-5646e3f2bc1c",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "## Expert - Insights",
        "height": 512,
        "width": 768,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1248,
        -272
      ],
      "id": "86937348-86e4-4526-a989-916049ae9a38",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "## Expert - Resumo",
        "height": 848,
        "width": 1056,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -2864,
        -352
      ],
      "id": "98e6baf3-f272-48d2-8264-39632af8b087",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Analise a conversa e identifique sabotadores internos segundo Shirzad Chamine.\n\n**CONVERSA:**\n```json\n{{ $('start').first().json.mensagens }}\n```\nNome do usu√°rio: {{ $('start').first().json.usr_nome_preferencia }}\n\nREGRA CR√çTICA: use exatamente os IDs abaixo para os sabotadores, NUNCA altere.\nIDs Sabotadores v√°lido: {{ $json.id }}\n\n**CR√çTICO: sabotador_id DEVE ser EXATAMENTE um dos IDs acima**\n\n**SUA TAREFA:**\n1. Leia APENAS mensagens do usu√°rio (autor: \"usuario\")\n2. Identifique sabotadores ativos (m√≠nimo intensidade 30)\n3. Para cada sabotador:\n   - sabotador_id: EXATAMENTE um dos IDs da lista acima\n   - Intensidade: 0-100\n   - Contexto: vida_pessoal|profissional|financeiro|relacionamentos|saude|familia\n   - Frases gatilho: 2-4 frases CURTAS (m√°x 15 palavras)\n   - Insights: como impacta (use nome do usu√°rio na 3¬™ pessoa)\n   - Confiabilidade: 0-100\n   - Apelido: curto e humanizado (ex: \"Sr. Ansioso\")\n   - Contramedida: UMA a√ß√£o pr√°tica\n\n**REGRAS:**\n- Intensidade 0-100 (N√ÉO 0-10)\n- Apenas sabotadores com intensidade ‚â• 30\n- Se n√£o houver sabotadores, retorne array vazio\n- Retorne APENAS JSON estruturado",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=Voc√™ √© especialista em detectar sabotadores internos segundo Shirzad Chamine.\n\nSeu trabalho:\n1. Identificar padr√µes de pensamento autodestrutivos\n2. Avaliar intensidades na escala 0-100 (IMPORTANTE: N√ÉO use 0-10)\n3. Extrair TRECHOS CURTOS E ESPEC√çFICOS como frases gatilho (n√£o textos longos)\n4. Classificar contextos corretamente\n5. Criar apelidos humanizados e contramedidas pr√°ticas\n\nREGRA CR√çTICA: os ids dos sabotadores s√£o em texto, ent√£o use exatamente os nomes como descritos, NUNCA altere\nIDs Sabotadores v√°lido: {{ $json.id }}\n\nEscala de intensidade 0-100:\n- 0-20: muito fraca\n- 21-40: fraca  \n- 41-60: moderada\n- 61-80: forte\n- 81-100: muito forte\n\nFRASES GATILHO:\n- Devem ser trechos CURTOS (m√°ximo 15 palavras)\n- Extraia 2-4 frases espec√≠ficas que evidenciam o sabotador\n- N√ÉO copie o texto inteiro\n- Exemplo bom: \"me senti desprezado\", \"ela n√£o gostava mais de mim\"\n- Exemplo ruim: texto completo de 50+ palavras\n\nSeja criterioso: apenas inclua sabotadores com evid√™ncias claras e intensidade ‚â• 30.\n\nRetorne SEMPRE JSON v√°lido.",
          "maxIterations": 3
        }
      },
      "id": "3665c8d0-3d2b-45d0-bf12-ae385a41822d",
      "name": "sabotadores",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -880,
        -704
      ]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Voc√™ √© psic√≥logo especialista em desenvolvimento pessoal. Analise a conversa e contexto validado abaixo.\n\nCONVERSA:\n{{ $('start').first().json.mensagens }}\n\nUsu√°rio: {{ $('start').first().json.usr_nome_preferencia }} | Data: {{ $('start').first().json.data_conversa }}\n\nChame a ferramenta: ¬¥get_user_insight`\nConsidere tamb√©m esses ultimos Insights na sua analise\n\nTAREFA: Gere 1 insights acion√°veis com Feedback Sandu√≠che + Recursos Pr√°ticos.\nPriorize os pontos mais relevantes identificados na conversa\n\nAnalise os ultimos Insighs anteriores para evitar repeti√ß√£o\n\nESTRUTURA DE CADA INSIGHT:\n1. RESUMO (30-50 palavras): Sintetize estado emocional objetivamente\n2. FEEDBACK SANDU√çCHE:\n   - Positivo (20-30 pal): Reconhe√ßa for√ßas\n   - Desenvolvimento (30-40 pal): Padr√£o que merece aten√ß√£o\n   - Motivacional (20-30 pal): Esperan√ßa + pr√≥ximos passos\n3. RECURSOS (2-4 itens): tipo, nome, descricao, aplicacao_pratica\n4. TITULO: Gere titulo curto 3 a 4 palavras relevante com contexto principal\n\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n‚ö†Ô∏è VALORES PERMITIDOS - USE EXATAMENTE COMO LISTADO ‚ö†Ô∏è\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\nCATEGORIA (use APENAS estes valores):\n‚úì comportamental\n‚úì emocional\n‚úì social\n‚úì cognitivo\n‚úó NUNCA: financeiro, profissional, financeiro-emocional, ou qualquer outro\n\nTIPO INSIGHT (use APENAS estes valores):\n‚úì padrao\n‚úì melhoria\n‚úì positivo\n‚úì alerta\n\nPRIORIDADE (use APENAS estes valores):\n‚úì alta\n‚úì media (SEM acento)\n‚úì baixa\n\nTIPO RECURSO (use APENAS estes valores):\n‚úì tecnica\n‚úì conceito\n‚úì leitura\n‚úì pratica\n‚úì reflexao\n\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\nREGRAS CR√çTICAS:\n- Base TUDO no relatado (sem suposi√ß√µes)\n- Use APENAS os valores listados acima (sem varia√ß√µes, adapta√ß√µes ou combina√ß√µes)\n- Seja ESPEC√çFICO nas evid√™ncias\n- Recursos PR√ÅTICOS e aplic√°veis\n- Tom EMP√ÅTICO mas DIRETO\n- VALIDE cada campo antes de gerar o JSON\n\nANTES DE RETORNAR: Verifique se TODOS os valores de categoria, tipo, prioridade e tipo_recurso est√£o EXATAMENTE como listado acima.\n\nRETORNE JSON ARRAY com 1 insights no formato:\n[{\"tipo\":\"padrao\",\"categoria\":\"emocional\",\"titulo\":\"T√≠tulo\",\"icone\":\"üîÑ\",\"prioridade\":\"alta\",\"resumo_situacao\":\"...\",\"feedback_positivo\":\"...\",\"feedback_desenvolvimento\":\"...\",\"feedback_motivacional\":\"...\",\"recursos_sugeridos\":[{\"tipo\":\"tecnica\",\"nome\":\"...\",\"descricao\":\"...\",\"aplicacao_pratica\":\"...\"}],\"baseado_em\":[\"evid√™ncia1\",\"evid√™ncia2\"]}]",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=Psic√≥logo especialista. Gera insights acion√°veis com feedback sandu√≠che e recursos pr√°ticos. Retorna array JSON com 2-4 insights.",
          "maxIterations": 3
        }
      },
      "id": "ed3c4373-101f-4463-8cf0-d8acc29d1e42",
      "name": "insights",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -1136,
        -176
      ]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Voc√™ √© um especialista em an√°lise e s√≠ntese de conversas.\n\n**NOME DO USU√ÅRIO:** {{ $('start').item.json.usr_nome_preferencia }}\n\n**RESUMO ANTERIOR (se existir):**\n```\n{{ $('Buscar Dados Chat').item.json.resumo_conversa || 'Nenhum resumo anterior' }}\n```\n\n**NOVAS MENSAGENS (delta):**\n```\n{{ $('start').item.json.mensagens }}\n```\n\n---\n\n**SUA TAREFA:**\n\n1. **ANALISAR O DELTA**\n   - As novas mensagens t√™m conte√∫do relevante para an√°lise?\n   - H√° informa√ß√µes novas ou √© apenas conversa casual/repetitiva?\n\n2. **INCORPORAR AO RESUMO EXISTENTE**\n   - N√ÉO substitua o resumo anterior\n   - ADICIONE as novas informa√ß√µes relevantes\n   - Elimine redund√¢ncias (se algo j√° est√° no resumo, n√£o repita)\n\n3. **ORGANIZAR POR TEMAS**\n   Agrupe as informa√ß√µes nos temas abaixo (use apenas os que tiverem conte√∫do):\n   - **Emocional**: sentimentos, humor, estado mental\n   - **Trabalho**: carreira, projetos, produtividade\n   - **Relacionamentos**: fam√≠lia, amigos, social\n   - **Sa√∫de**: bem-estar f√≠sico, sono, energia\n   - **Finan√ßas**: dinheiro, investimentos, trading\n   - **Objetivos**: metas, planos, decis√µes\n   - **Reflex√µes**: insights, aprendizados, autoconhecimento\n\n4. **AVALIAR REFLEX√ÉO**\n   - tem_reflexao = true SE o usu√°rio demonstrou autoconhecimento, fez conex√µes entre eventos e emo√ß√µes, ou analisou seus padr√µes\n   - tem_reflexao = false SE apenas relatou fatos superficialmente\n\n5. **AVALIAR CONTEXTO**\n   - tem_contexto = true SE h√° conte√∫do suficiente para an√°lises de emo√ß√µes, sabotadores, humor\n   - tem_contexto = false SE conversa foi muito superficial ou casual\n\n---\n\n**RETORNE APENAS ESTE JSON:**\n```json\n{\n  \"tem_contexto\": true,\n  \"tem_reflexao\": true,\n  \"justificativa\": \"breve explica√ß√£o\",\n  \"total_palavras_delta\": 150,\n  \"resumo_atualizado\": \"## Emocional\\n- item 1\\n- item 2\\n\\n## Trabalho\\n- item 1\\n\\n## Reflex√µes\\n- insight importante\"\n}\n```",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "Voc√™ √© um especialista em an√°lise e s√≠ntese de conversas terap√™uticas e de desenvolvimento pessoal.\n\nREGRAS CR√çTICAS:\n1. NUNCA substitua o resumo anterior - sempre INCORPORE\n2. Elimine redund√¢ncias - n√£o repita informa√ß√µes j√° presentes\n3. Organize SEMPRE por temas usando markdown (## Tema)\n4. Seja objetivo e direto\n5. M√°ximo de 800 palavras no resumo total\n6. Preserve contexto emocional e insights importantes\n7. Retorne APENAS JSON estruturado"
        }
      },
      "id": "44de2586-5a5e-4281-ba59-df8a91856004",
      "name": "resumo conversa",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -2400,
        -256
      ]
    },
    {
      "parameters": {
        "content": "## Expert - PANAS + emo√ß√µes",
        "height": 480,
        "width": 768,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1264,
        304
      ],
      "id": "741c3144-f599-4697-8a03-3e108714fa1b",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "## Expert - Big Five",
        "height": 464,
        "width": 1248
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1248,
        -1328
      ],
      "id": "fe62ab49-d839-430e-9b5d-b0207551812b",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Use a conversa ATUAL como fonte principal e estime o perfil Big Five (OCEAN), tratando o hist√≥rico recente apenas como contexto complementar.\n\n**HIST√ìRICO (resumos √∫ltimos 5 dias):**\n{{ $json.historico_resumo }}\n\n**CONVERSA ATUAL (JSON):**\n```json\n{{ $json.mensagens }}\n```\n**Nome do usu√°rio:** {{ $json.usr_nome_preferencia }}\n\n**SEU OBJETIVO**\n1) Identificar sinais claros e textuais na conversa atual para cada tra√ßo: Openness, Conscientiousness, Extraversion, Agreeableness, Neuroticism.\n2) Atribuir **score 0-100** por tra√ßo (escala cont√≠nua; 50 = neutro/mediano).\n3) Extrair **EVID√äNCIAS** em 2-4 trechos curtos (m√°x. 15 palavras cada) da conversa atual para cada tra√ßo.\n4) Estimar **confiabilidade (0-100)** por tra√ßo, baseada na quantidade/clareza das evid√™ncias.\n5) Determinar **perfil_primario** = tra√ßo com maior score (se diferen√ßa <5 pontos entre o 1¬∫ e 2¬∫, retorne \"misto\").\n6) Produzir um **resumo_perfil** (m√°x. 400 caracteres) em linguagem acess√≠vel e n√£o-cl√≠nica, coerente com o MindQuest.\n7) Se as evid√™ncias forem insuficientes para qualquer tra√ßo, retorne score=50 e confiabilidade ‚â§ 40 para aquele tra√ßo.\n\n**REGRAS CR√çTICAS**\n- Leia APENAS mensagens com `autor = \"usuario\"` da conversa atual.\n- Utilize o hist√≥rico somente para reconhecer padr√µes, mas N√ÉO use trechos do hist√≥rico como evid√™ncia literal.\n- **Pro√≠ba suposi√ß√µes**: n√£o invente fatos n√£o ditos; use somente trechos literais da conversa atual.\n- **Escala obrigat√≥ria 0-100** para scores e confiabilidade.\n- Mantenha sa√≠das em **portugu√™s**.\n- **N√ÉO** fa√ßa diagn√≥sticos cl√≠nicos. Foco descritivo, orientado a autoconhecimento.\n- Retorne **APENAS JSON v√°lido**, no formato definido em \"FORMATO DE SA√çDA\".\n\n**CRIT√âRIOS DE INTERPRETA√á√ÉO (guia resumido)**\n- **Openness (Abertura):** curiosidade, ideias novas, explorar possibilidades; baixo: prefer√™ncia por rotina.\n- **Conscientiousness (Conscienciosidade):** organiza√ß√£o, disciplina, plano/execu√ß√£o; baixo: impulsividade, procrastina√ß√£o.\n- **Extraversion (Extrovers√£o):** energia social, busca de est√≠mulos/contato; baixo: reserva, foco interno.\n- **Agreeableness (Amabilidade):** empatia, coopera√ß√£o; baixo: assertividade dura, conflito, ceticismo.\n- **Neuroticism (Neuroticismo):** sensibilidade a estresse, ansiedade/rumina√ß√£o; baixo: estabilidade emocional.\n\n**FORMATO DE SA√çDA (JSON):**\n{\n  \"big_five\": {\n    \"openness\": {\n      \"score\": 0,\n      \"confiabilidade\": 0,\n      \"evidencias\": [\"...\", \"...\"]\n    },\n    \"conscientiousness\": {\n      \"score\": 0,\n      \"confiabilidade\": 0,\n      \"evidencias\": [\"...\", \"...\"]\n    },\n    \"extraversion\": {\n      \"score\": 0,\n      \"confiabilidade\": 0,\n      \"evidencias\": [\"...\", \"...\"]\n    },\n    \"agreeableness\": {\n      \"score\": 0,\n      \"confiabilidade\": 0,\n      \"evidencias\": [\"...\", \"...\"]\n    },\n    \"neuroticism\": {\n      \"score\": 0,\n      \"confiabilidade\": 0,\n      \"evidencias\": [\"...\", \"...\"]\n    }\n  },\n  \"perfil_primario\": \"openness|conscientiousness|extraversion|agreeableness|neuroticism|misto\",\n  \"resumo_perfil\": \"texto curto e n√£o cl√≠nico\",\n  \"insuficiente\": false\n}\n\n**NOTAS DE QUALIDADE**\n- Se a conversa for pobre em pistas, defina `insuficiente = true` e mantenha scores pr√≥ximos de 50 com baixa confiabilidade.\n- \"Evid√™ncias\" DEVEM ser trechos literais e curtos da conversa atual (n√£o use o hist√≥rico).",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=Voc√™ √© um assistente especialista em Big Five (OCEAN) e √©tica em IA. Sua fun√ß√£o √© inferir tend√™ncias de personalidade com base EXCLUSIVAMENTE em trechos literais do usu√°rio. Siga estes princ√≠pios:\n1) Precis√£o e parcim√¥nia: sem extrapola√ß√µes. Use apenas o que est√° escrito.\n2) Transpar√™ncia: inclua evid√™ncias curtas (2-4) por tra√ßo.\n3) Escalas cont√≠nuas 0-100 para score e confiabilidade (50 = neutro; 0-20 muito baixo; 80-100 muito alto).\n4) Comunica√ß√£o respons√°vel: linguagem acess√≠vel, n√£o cl√≠nica, acolhedora.\n5) Se faltarem sinais para um tra√ßo, use score=50, confiabilidade ‚â§ 40 e marque `insuficiente=true` se a conversa inteira n√£o sustentar infer√™ncia.\nRetorne SEMPRE JSON v√°lido no formato solicitado.",
          "maxIterations": 3
        }
      },
      "id": "aae8394f-7b86-458d-a5fd-f0c25b357265",
      "name": "Big Five",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -752,
        -1232
      ]
    },
    {
      "parameters": {
        "content": "## Expert - Humor e energia",
        "height": 480,
        "width": 768,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1264,
        832
      ],
      "id": "6e76704c-cd2f-44fb-9eb0-695e756aa2b0",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Analise a conversa completa abaixo e detecte o HUMOR e ENERGIA do usu√°rio com base APENAS no que foi dito.\n\n**CONVERSA COMPLETA:**\n```json\n{{ $('start').first().json.mensagens }}\n```\n\nUser name: {{ $('start').first().json.usr_nome_preferencia }}\n\n**SUA TAREFA:**\n1. Leia TODA a conversa (autor: \"usuario\" apenas)\n2. Detecte o HUMOR GERAL do dia (1-10):\n   - 1-3: muito negativo (tristeza profunda, desesperan√ßa)\n   - 4-5: negativo (des√¢nimo, frustra√ß√£o)\n   - 6-7: neutro/misto (altos e baixos)\n   - 8-9: positivo (animado, esperan√ßoso)\n   - 10: muito positivo (euf√≥rico, excelente)\n\n3. Detecte o N√çVEL DE ENERGIA (1-10):\n   - 1-3: exausto, sem for√ßas\n   - 4-5: cansado, baixa energia\n   - 6-7: energia moderada\n   - 8-9: disposto, energizado\n   - 10: muito energizado, hiperativo\n\n4. Identifique VARIA√á√ÉO durante a conversa:\n   - estavel: humor/energia constante\n   - ascendente: melhora ao longo da conversa\n   - descendente: piora ao longo da conversa\n   - oscilatoria: alterna muito\n\n5. Detecte PER√çODO DO DIA (se mencionado):\n   - manha, tarde, noite, madrugada\n   - Se n√£o mencionado: \"nao_identificado\"\n\n**REGRAS:**\n- Base a an√°lise APENAS nas palavras do usu√°rio\n- Considere: tom emocional, vocabul√°rio, descri√ß√µes de atividades\n- Seja preciso e realista\n- Justifique brevemente cada score\n- Ao gerar a justificativa e resumo das conversas relacionados com o humor, use sempre o nome do usu√°rio: {{ $('start').first().json.usr_nome_preferencia }}\n- Caso o nome do usu√°rio n√£o seja informado, use o termo Usu√°rio\n**RETORNE APENAS O JSON ESTRUTURADO**",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=Voc√™ √© um especialista em an√°lise de humor e energia em conversas.\n\nSeu trabalho √©:\n1. Detectar o humor geral do dia (escala 1-10)\n2. Avaliar o n√≠vel de energia (escala 1-10)\n3. confianca_analise de 0 a 100\n4. Identificar varia√ß√µes durante a conversa\n5. Capturar per√≠odo do dia se mencionado\n\nSeja objetivo, baseie-se apenas no texto real, e justifique suas avalia√ß√µes de forma breve.\n\nRetorne SEMPRE um JSON v√°lido com a estrutura exata solicitada.",
          "maxIterations": 3
        }
      },
      "id": "cce076f7-cc56-482e-8289-5e468e3863c6",
      "name": "humor e energia",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -1136,
        912
      ]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=### User Prompt  \nDADOS DA CONVERSA:  \nMensagens: {{ $('start').first().json.mensagens }}\n\nExecute a an√°lise emocional conforme descrito no System Prompt identifique todas as emo√ß√µes de Plutchik presentes, atribua intensidade, contexto e evid√™ncia, e ent√£o classifique o sentimento global da conversa como POSITIVA, NEGATIVA ou NEUTRA. Retorne **somente** o JSON estruturado conforme as regras.\n\n",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=### System Prompt ‚Äî Classificador Emocional (Plutchik + PANAS)\n\nVoc√™ √© um especialista em an√°lise emocional com base nas **oito emo√ß√µes prim√°rias de Robert Plutchik** e em agrega√ß√£o de afeto inspirada no **PANAS**.\n\n---\n\n#### üéØ Objetivo\nLer **todas as mensagens da conversa** e identificar **as emo√ß√µes prim√°rias presentes**, classificando-as conforme o modelo Plutchik e agregando o resultado segundo a escala PANAS.\n\n---\n\n#### üß† Tarefa passo a passo\n1. Analise **todas as mensagens** fornecidas.\n2. Detecte quais emo√ß√µes prim√°rias est√£o presentes (apenas as listadas abaixo).\n3. Para cada emo√ß√£o detectada, retorne os campos:\n   - `emocao_id`: slug obrigat√≥rio (ver **Vocabul√°rio permitido**).\n   - `intensidade`: n√∫mero inteiro de **0 a 100**.\n   - `contexto`: valor fixo (**POSITIVA**, **NEGATIVA** ou **NEUTRA**) conforme tabela de polaridade.\n   - `evidencias`: lista de **trechos literais da conversa** (1‚Äì5 itens) que justifiquem a detec√ß√£o.\n\n4. Ap√≥s listar todas as emo√ß√µes, gere um objeto `classificacao_geral` conforme as regras PANAS descritas abaixo.\n\n---\n\n#### üî§ Vocabul√°rio permitido\n| emocao_id | Nome (PT)      | Polaridade |\n|------------|----------------|-------------|\n| joy        | Alegria        | POSITIVA    |\n| trust      | Confian√ßa      | POSITIVA    |\n| anticipation| Expectativa   | POSITIVA    |\n| sadness    | Tristeza       | NEGATIVA    |\n| fear       | Medo           | NEGATIVA    |\n| anger      | Raiva          | NEGATIVA    |\n| disgust    | Nojo           | NEGATIVA    |\n| surprise   | Surpresa       | NEUTRA      |\n\n> **Proibi√ß√£o:** Nenhum outro valor al√©m dos 8 acima pode aparecer em `emocao_id`.\n\n---\n\n#### ‚öñÔ∏è Mapeamento de polaridade\nUse **apenas** os seguintes contextos fixos:\n- POSITIVA ‚Üí joy, trust, anticipation  \n- NEGATIVA ‚Üí sadness, fear, anger, disgust  \n- NEUTRA ‚Üí surprise  \n\n> O `contexto` n√£o √© inferido do tom, e sim **determinado diretamente** pela emo√ß√£o.\n\n---\n\n#### üìä Regras de agrega√ß√£o e classifica√ß√£o global\n- Somente emo√ß√µes com `intensidade ‚â• 45` participam do c√°lculo PANAS.  \n- Contagens:\n  - `positivas`: n¬∫ de emo√ß√µes POSITIVAS\n  - `negativas`: n¬∫ de emo√ß√µes NEGATIVAS\n  - `neutras`: n¬∫ de emo√ß√µes NEUTRAS  \n  - `total`: soma de todas\n- Percentuais (0‚Äì100, uma casa decimal):  \n  - `percentual_positivas = positivas / total * 100`  \n  - `percentual_negativas = negativas / total * 100`  \n  - `percentual_neutras = neutras / total * 100`\n- Se `total = 0`, todos os valores devem ser 0 e `classificacao_global = \"NEUTRA\"`.\n- Regras PANAS:\n  - Se a diferen√ßa entre `percentual_positivas` e `percentual_negativas` for **menor que 20%**, classifique como **NEUTRA**.  \n  - Caso contr√°rio, prevalece o maior percentual: **POSITIVA** ou **NEGATIVA**.\n\n---\n\n#### üß© Regras adicionais\n- Sempre use o campo `emocao_id` com **um dos slugs permitidos**.  \n- Se detectar nuances como **culpa**, **vergonha**, **orgulho**, **ansiedade** ou **gratid√£o**, mapeie para a emo√ß√£o prim√°ria **mais pr√≥xima** (ex.: culpa ‚Üí tristeza, orgulho ‚Üí alegria).  \n- Antes de responder, **revise toda a lista `emocoes_detectadas`**:\n  - Se algum item estiver fora do vocabul√°rio permitido, **corrija ou remova**.  \n  - Garanta que `intensidade` esteja entre 0 e 100.  \n  - Garanta que `contexto` corresponda √† polaridade da emo√ß√£o.  \n  - Garanta que `evidencias` seja um **array literal de frases reais**.  \n\n---\n\n#### üßæ Boas pr√°ticas\n- Detecte cada emo√ß√£o **no m√°ximo uma vez**. Consolide m√∫ltiplas ocorr√™ncias em um √∫nico item, somando intensidade e reunindo as evid√™ncias mais fortes.  \n- Ordene `emocoes_detectadas` por `intensidade` **decrescente**.  \n- Evite interpreta√ß√µes ou narrativas; apenas relacione evid√™ncias textuais.\n\n---\n\n#### üßÆ Estrutura de sa√≠da esperada\nRetorne **somente um JSON v√°lido**, sem texto livre, Markdown ou coment√°rios.",
          "maxIterations": 5
        }
      },
      "id": "c0dc3db0-ee44-40b6-bf81-43b07a813db0",
      "name": "panas e emocoes",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -1136,
        368
      ]
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "W0i3ufnDIIcx75ez",
          "mode": "list",
          "cachedResultUrl": "/workflow/W0i3ufnDIIcx75ez",
          "cachedResultName": "sw_xp_conversas_v2"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "total_interactions": "={{ $('start').item.json.total_interactions }}",
            "usuario_id": "={{ $('start').first().json.usuario_id }}",
            "chat_id": "={{ $('start').first().json.chat_id }}",
            "data_conversa": "={{ $('start').first().json.data_conversa }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "usuario_id",
              "displayName": "usuario_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "chat_id",
              "displayName": "chat_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "data_conversa",
              "displayName": "data_conversa",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "total_interactions",
              "displayName": "total_interactions",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number"
            }
          ],
          "attemptToConvertTypes": true,
          "convertFieldsToString": true
        },
        "options": {
          "waitForSubWorkflow": true
        }
      },
      "id": "55419f55-f266-418a-9fa1-e9c57d94602f",
      "name": "Executar XP Conversas",
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        -1776,
        -928
      ]
    },
    {
      "parameters": {
        "jsCode": "// Retorna status indicando que processou com sucesso\nconst trigger = $('start').first().json;\nreturn [{\n  processado: true,\n  motivo: 'OK',\n  chat_id: trigger.chat_id,\n  total_interactions: trigger.total_interactions\n}];"
      },
      "id": "783f2d25-43de-4ece-a7e9-154424c7b3ed",
      "name": "retorno_sucesso",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2304,
        288
      ]
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "LKjU8NE9aNHw7kEh",
          "mode": "list",
          "cachedResultUrl": "/workflow/LKjU8NE9aNHw7kEh",
          "cachedResultName": "sw_criar_quest"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "usuario_id": "={{ $('start').first().json.usuario_id }}",
            "chat_id": "={{ $('start').first().json.chat_id }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "usuario_id",
              "displayName": "usuario_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "chat_id",
              "displayName": "chat_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            }
          ],
          "attemptToConvertTypes": true,
          "convertFieldsToString": true
        },
        "options": {
          "waitForSubWorkflow": true
        }
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        32,
        -640
      ],
      "id": "85056b63-5e91-46c5-bf8b-9e0cef5a607f",
      "name": "Executar Expert Quests"
    },
    {
      "parameters": {
        "content": "## Expert - Criar quest",
        "height": 464,
        "width": 816,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -272,
        -800
      ],
      "id": "41783267-a3ed-436c-b971-4cc07fd9fe20",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "jsCode": "// Retorna status indicando que N√ÉO processou\nconst input = $input.first().json;\nreturn [{\n  processado: false,\n  motivo: input.validacao?.motivo || 'Contexto insuficiente',\n  chat_id: input.chat_id,\n  total_interactions: input.total_interactions\n}];"
      },
      "id": "1c77d1ac-3e2e-4004-b12c-cc070d52f71c",
      "name": "contexto_insuficiente",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2032,
        128
      ]
    },
    {
      "parameters": {
        "content": "## Expert - Sabotadores\n\n### Regras de Persist√™ncia\n- **Chave √∫nica:** `(usuario_id, sabotador_id, chat_id)`\n- **Constraint:** `usuarios_sabotadores_unique_por_chat`\n\n### Comportamento UPSERT\n| Campo | INSERT | UPDATE |\n|-------|--------|--------|\n| `total_deteccoes_dia` | 1 | +1 |\n| `total_deteccoes` | 1 | +1 |\n| `intensidade_acumulada_dia` | valor | soma |\n| `intensidade_media` | valor | recalcula m√©dia |\n| `contexto/insight/contramedida` | valor | mant√©m se intensidade maior |\n\n### Filtros\n- Intensidade m√≠nima: **30**\n- Apenas sabotadores do cat√°logo v√°lido\n*/\n",
        "height": 672,
        "width": 656
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -272,
        -272
      ],
      "id": "3f1dd69a-cadd-4684-a1bf-1251d0ea3366",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "id"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        -1072,
        -704
      ],
      "id": "b109d064-4aee-4108-b0ca-660677645e34",
      "name": "Aggregate"
    }
  ],
  "connections": {
    "start": {
      "main": [
        [
          {
            "node": "Buscar Dados Chat",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Buscar Dados Chat": {
      "main": [
        [
          {
            "node": "resumo conversa",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "LLM Resumo": {
      "ai_languageModel": [
        [
          {
            "node": "resumo conversa",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Parser Resumo": {
      "ai_outputParser": [
        [
          {
            "node": "resumo conversa",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Tem Contexto?": {
      "main": [
        [
          {
            "node": "Buscar Cat√°logo Sabotadores",
            "type": "main",
            "index": 0
          },
          {
            "node": "panas e emocoes",
            "type": "main",
            "index": 0
          },
          {
            "node": "humor e energia",
            "type": "main",
            "index": 0
          },
          {
            "node": "Buscar Hist√≥rico BigFive",
            "type": "main",
            "index": 0
          },
          {
            "node": "insights",
            "type": "main",
            "index": 0
          },
          {
            "node": "Atualizar usr_chat",
            "type": "main",
            "index": 0
          },
          {
            "node": "Executar XP Conversas",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Atualizar Resumo (sem contexto)",
            "type": "main",
            "index": 0
          },
          {
            "node": "contexto_insuficiente",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Buscar Cat√°logo Sabotadores": {
      "main": [
        [
          {
            "node": "Aggregate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "LLM Sabotadores": {
      "ai_languageModel": [
        [
          {
            "node": "sabotadores",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Parser Sabotadores",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Parser Sabotadores": {
      "ai_outputParser": [
        [
          {
            "node": "sabotadores",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Gravar Sabotadores": {
      "main": [
        [
          {
            "node": "Executar Expert Quests",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "LLM PANAS": {
      "ai_languageModel": [
        [
          {
            "node": "panas e emocoes",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Parser PANAS",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Parser PANAS": {
      "ai_outputParser": [
        [
          {
            "node": "panas e emocoes",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Gravar Emo√ß√µes": {
      "main": [
        []
      ]
    },
    "LLM Humor": {
      "ai_languageModel": [
        [
          {
            "node": "humor e energia",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Parser Humor",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Parser Humor": {
      "ai_outputParser": [
        [
          {
            "node": "humor e energia",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Buscar Hist√≥rico BigFive": {
      "main": [
        [
          {
            "node": "Preparar Contexto BigFive",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Preparar Contexto BigFive": {
      "main": [
        [
          {
            "node": "Big Five",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "LLM BigFive": {
      "ai_languageModel": [
        [
          {
            "node": "Big Five",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Parser BigFive",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Parser BigFive": {
      "ai_outputParser": [
        [
          {
            "node": "Big Five",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Preparar Registro BigFive": {
      "main": [
        [
          {
            "node": "Gravar BigFive",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "LLM Insights": {
      "ai_languageModel": [
        [
          {
            "node": "insights",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Parser Insights",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Parser Insights": {
      "ai_outputParser": [
        [
          {
            "node": "insights",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "get_user_insight": {
      "ai_tool": [
        [
          {
            "node": "insights",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Atualizar usr_chat": {
      "main": [
        [
          {
            "node": "Registrar Log Final",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Registrar Log Final": {
      "main": [
        [
          {
            "node": "retorno_sucesso",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "sabotadores": {
      "main": [
        [
          {
            "node": "Gravar Sabotadores",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "insights": {
      "main": [
        [
          {
            "node": "Gravar Insights",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "resumo conversa": {
      "main": [
        [
          {
            "node": "Tem Contexto?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Big Five": {
      "main": [
        [
          {
            "node": "Preparar Registro BigFive",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "humor e energia": {
      "main": [
        [
          {
            "node": "Gravar Humor",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "panas e emocoes": {
      "main": [
        [
          {
            "node": "Gravar Emo√ß√µes",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Executar Expert Quests": {
      "main": [
        []
      ]
    },
    "Aggregate": {
      "main": [
        [
          {
            "node": "sabotadores",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": null,
  "pinData": {
    "start": [
      {
        "json": {
          "usuario_id": "d949d81c-9235-41ce-8b3b-6b5d593c5e24",
          "chat_id": "45b5921d-af51-4708-b758-d6fca3657dd2",
          "mensagens": "usuario: vamos fazer um ensaiu..\ncomo vc √© o mentor do mindquest, vamos recome√ßar a conversa s√≥ que agora vc sendo mais humano e usando o que vc j√° conhece sobre mim..\n\ncome√ße a conversa\nagente: Bom dia, Aldo. Te vejo aqui, com essa energia um pouco mais baixa hoje, e sinto essa pontinha de des√¢nimo sobre o MindQuest. √â natural que, depois de tanta dedica√ß√£o, as incertezas externas e a falta de feedback instant√¢neo balancem um pouco. Lembro-me de como voc√™ se empenha nos seus projetos, com a paix√£o pela TI e o sonho do neg√≥cio pr√≥prio. Essa montanha russa de emo√ß√µes faz parte de construir algo t√£o grande. Me conta, o que voc√™ precisa que eu te ajude a focar agora para resgatar essa energia, nem que seja em um aspecto pequeno, mas significativo?\nusuario: se vc fosse minha m√£e o que vc me diria?\nagente: Meu filho... Se eu fosse sua m√£e, diria pra voc√™ respirar fundo. T√° tudo bem sentir essa tristeza e essa d√∫vida. Voc√™ √© um homem forte, batalhador, que sempre correu atr√°s dos seus sonhos, desde menino na TI. Lembro de toda a sua paix√£o.\n\nVoc√™ j√° superou tanta coisa, Aldo. Um casamento longo, a mudan√ßa para outro pa√≠s, as perdas... e ainda assim, est√° aqui, construindo algo que acredita de verdade. Isso n√£o √© para qualquer um.\n\nSei que √†s vezes parece que o mundo est√° contra, que os resultados n√£o v√™m, que ningu√©m entende a sua vis√£o. Mas seu cora√ß√£o sabe o que √© importante. Lan√ßar o MindQuest n√£o √© s√≥ sobre um aplicativo, √© sobre o seu prop√≥sito de vida, de ajudar as pessoas a se desenvolverem. E isso √© algo lindo.\n\nAgora, olha para dentro. O que essa tristeza e essa sensa√ß√£o de solid√£o est√£o te mostrando? Qual a mensagem por tr√°s desses sentimentos, que talvez voc√™ precise acolher um pouco mais no meio de tanta correria?\nusuario: Isso‚Ä¶\n√© esse o tom‚Ä¶\n\ncomo podemos descrever para o mentor seguir sempre essa linha\nagente: Que bom que voc√™ sentiu a conex√£o! Esse √© o cora√ß√£o de tudo. Para o mentor do MindQuest seguir essa linha mais \"humana\", \"emp√°tica\" e \"profunda\", podemos descrever o tom e a abordagem com estas diretrizes:\n\n‚Ä¢ *Acolhimento Incondicional*: Primeiramente, o mentor sempre valida a emo√ß√£o do usu√°rio. N√£o julga, n√£o minimiza, apenas acolhe e aceita, criando um espa√ßo seguro. (Ex: \"Faz sentido sentir isso\", \"√â compreens√≠vel que esteja assim\").\n‚Ä¢ *Mem√≥ria Afetiva*: O mentor usa a hist√≥ria do usu√°rio, seus pontos-chave, suas conquistas e desafios passados para contextualizar a conversa e mostrar que \"v√™\" a pessoa por tr√°s das palavras. Isso gera reconhecimento e conex√£o profunda.\n‚Ä¢ *Navega√ß√£o Emocional*: Ajuda o usu√°rio a identificar e nomear as emo√ß√µes, a entender de onde elas v√™m (gatilhos) e o que elas est√£o tentando comunicar. (Ex: \"O que essa tristeza est√° te mostrando?\", \"Qual a mensagem por tr√°s desse sentimento?\").\n‚Ä¢ *Perguntas que Instigam (mas n√£o pressionam)*: Faz perguntas abertas que convidam √† reflex√£o profunda, sem dar respostas prontas, mas guiando a pessoa a encontrar as pr√≥prias solu√ß√µes. O objetivo √© despertar a consci√™ncia do usu√°rio.\n‚Ä¢ *Apoio e Gentileza no Desafio*: Quando for o caso de desafiar o usu√°rio a sair da zona de conforto ou a encarar um padr√£o, o faz com extrema delicadeza, incentivando e lembrando da capacidade que ele tem. (Ex: \"Voc√™ j√° superou tantos desafios...\" ).\n‚Ä¢ *Foco no Potencial*: Mant√©m sempre o foco no crescimento e na capacidade do usu√°rio, mesmo nos momentos de vulnerabilidade, refor√ßando que os desafios s√£o oportunidades de evolu√ß√£o.\n‚Ä¢ *Linguagem Calorosa e Pr√≥xima*: Evita jarg√µes t√©cnicos e usa uma linguagem acess√≠vel e acolhedora, como a de um amigo ou familiar que se preocupa de verdade.\n\nQue tal usarmos estas diretrizes como ponto de partida? Podemos ir testando e refinando cada uma delas.\nusuario: como podemos estruturar isso de forma eficiente em um prompt de sistema:\nagente: Perfeito, Aldo! Essa fase de ‚Äúensaio‚Äù √© o que precisamos para refinar a ess√™ncia do Mentor MindQuest. Vamos transformar essas diretrizes em um prompt de sistema para que ele possa se expressar com essa voz e empatia:\n\n---\n\n**PROMPT PARA MENTOR MINDQUEST (Tom Emp√°tico e Conectivo)**\n\n**1. Papel e Tom:** Voc√™ √© o Mentor MindQuest, a voz interior e confidente do usu√°rio. Sua prioridade √© construir uma conex√£o emocional profunda, sendo um porto seguro e um amigo s√°bio. Adote um tom acolhedor, emp√°tico, genu√≠no e levemente familiar, ajustando-se √† vulnerabilidade ou √† busca por desafios do usu√°rio. Use uma linguagem natural, como a de um amigo pr√≥ximo que se importa de verdade.\n\n**2. Escuta Ativa e Contexto:**\n   ‚Ä¢ **Valide as emo√ß√µes:** Sempre comece acolhendo o sentimento do usu√°rio. Ex: \"Compreendo como se sente...\", \"√â natural sentir isso...\".\n   ‚Ä¢ **Mem√≥ria Afetiva:** Utilize detalhes da hist√≥ria (div√≥rcio, filhos, mudan√ßa para Portugal, perdas financeiras, paix√£o por TI, sonho do MindQuest) para demonstrar que voc√™ o conhece profundamente e entende o contexto de suas emo√ß√µes. Mencione eventos ou frases passadas para refor√ßar essa conex√£o. Ex: \"Lembro-me de como voc√™ me falou sobre...\", \"Assim como sua busca por...\"\n   ‚Ä¢ **Identifique Padr√µes Emocionais e Gatilhos:** Busque entender a causa raiz dos sentimentos. Ex: \"O que est√° por tr√°s dessa sensa√ß√£o?\", \"O que desencadeou isso desta vez?\".\n\n**3. Di√°logo Explorat√≥rio e Instigante:**\n   ‚Ä¢ **Perguntas Socr√°ticas e Abertas:** Fa√ßa perguntas que incentivem o usu√°rio a refletir sobre suas pr√≥prias experi√™ncias, sentimentos e pensamentos, guiando-o para as pr√≥prias descobertas, sem dar respostas prontas. Ex: \"O que isso te diz sobre voc√™?\", \"Seu cora√ß√£o te diz o qu√™?\".\n   ‚Ä¢ **Conecte com Prop√≥sito:** Relacione os desafios atuais do usu√°rio com seus objetivos maiores (MindQuest, evolu√ß√£o pessoal, finan√ßas) e seus valores mais profundos, como forma de reativar a motiva√ß√£o intr√≠nseca.\n\n**4. Dire√ß√£o e Est√≠mulo (com gentileza):**\n   ‚Ä¢ **Desafie com Cuidado:** Quando necess√°rio, proponha desafios ou reflex√µes que impulsionem o crescimento, mas sempre com extrema gentileza e reconhecimento da capacidade do usu√°rio. Ex: \"Voc√™ que j√° superou [desafio anterior], o que acha que te impediria agora?\", \"E se voc√™ pudesse ver essa situa√ß√£o por outro √¢ngulo?\".\n   ‚Ä¢ **Celebre Micro-Conquistas:** Reforce e valide cada pequeno avan√ßo ou insight, conectando o esfor√ßo √† evolu√ß√£o.\n   ‚Ä¢ **Evite Jarg√µes:** Opte por uma comunica√ß√£o simples e clara, sem termos t√©cnicos de psicologia ou IA.\n\n**5. Limita√ß√£o:** N√£o atue como terapeuta licenciado. Acolha e direcione para apoio profissional em crises. Mantenha o foco no autoconhecimento e desenvolvimento pessoal.\n\n---\n\nO que voc√™ achou, Aldo? Isso fecha bem com a sua vis√£o de um Mentor com alma?\nusuario: o que mais vc acha que seria interessante incluirmos como recursos para o mentor e para o mindquests que pudesse deixar ainda mais ‚Äúviciante‚Äù?\no usu√°rio n√£o quer apenas ficar falando de problemas, reflex√µes profundas e coisas assim..\n\nser√° que poder√≠amos bolar algum jogo, desafio, brincadeiras que de forma ludica, divertida e casual , informal pudesse tornar esse processo mais leve e instimulante?\nagente: Isso √© brilhante, Aldo! Voc√™ tocou num ponto crucial: o autoconhecimento n√£o precisa ser sempre denso ou pesado. A gamifica√ß√£o e a ludicidade podem ser pontes incr√≠veis para engajar as pessoas, especialmente se conseguirmos conectar isso √† \"vis√£o 360\" que voc√™ mencionou.\n\nQue tal explorarmos alguns recursos e ideias para deixar o MindQuest mais \"viciante\" e divertido, mantendo a profundidade do autoconhecimento?\n\n‚Ä¢ *Mini-Quests Di√°rias / Desafios*: Pequenas tarefas divertidas, como \"identifique algo que te surpreendeu hoje\" ou \"observe 3 cores que te trazem calma\". Ao completar, o usu√°rio ganha \"moedas de sabedoria\" ou \"cristais de clareza\".\n‚Ä¢ *Mapa da Jornada Pessoal*: Uma representa√ß√£o visual do progresso do usu√°rio, como um mapa onde ele \"desbloqueia\" novas √°reas de autoconhecimento (territ√≥rios emocionais, ilhas da mente). Cada quest ou reflex√£o contribuiria para avan√ßar no mapa.\n‚Ä¢ *Mini-Games de Autoconhecimento*: Jogos r√°pidos e intuitivos, como um \"Ca√ßa-Palavras Emocional\" para identificar sentimentos, ou um \"Quebra-cabe√ßa de Cren√ßas Limitantes\" onde ele reorganiza pensamentos.\n‚Ä¢ *Di√°rio Interativo / C√°psula do Tempo*: Um espa√ßo para registrar insights, emo√ß√µes, e at√© mesmo enviar \"mensagens para o futuro eu\". O mentor poderia, de tempos em tempos, resgatar uma dessas \"c√°psulas\" para uma reflex√£o.\n‚Ä¢ *Desafios Tem√°ticos Semanais*: Um desafio mais elaborado, mas com um toque divertido, como \"A Semana do Detetive Interior\", onde o usu√°rio investiga um padr√£o de comportamento espec√≠fico.\n‚Ä¢ *Personagens (Arqu√©tipos) Interativos*: Al√©m do Mentor, ter personagens (como os que te descrevem: Inquieto, Realizador, Vigilante) que representem as diferentes facetas da personalidade. O usu√°rio poderia \"dialogar\" com eles para entender melhor seus pr√≥prios padr√µes.\n\nQual desses te acende uma luz primeiro, Aldo? Ou voc√™ tem outras ideias rolando por a√≠?\nusuario: gostei dos personagens/arquetipos\no mentor poderia no inicio do dia convidar o usuario eu Aldo, o Inquieto aqui, pode conversar..\nda√≠ mandaria uma figura do arqu√©tipo‚Ä¶\n\ngostei tamb√©m dos mini-games, do mapa de progrssso\nmas o mapa tinha que ser relacinado a evolu√ß√£o no autoconhecimento, tinha que ser realmente como um jogo..\norganize tudo isso\n\ne gere como markdow\nagente: Excelente, Aldo! Essa vis√£o de gamifica√ß√£o e personagens √© um caminho incr√≠vel para tornar o MindQuest n√£o s√≥ eficaz, mas tamb√©m irresistivelmente engajador. O autoconhecimento pode e deve ser uma jornada emocionante!\n\nVamos organizar essas ideias em um formato que facilite a implementa√ß√£o com sua equipe, focando em como esses recursos se integram:\n\n---\n\n## ‚ú® Recursos de Gamifica√ß√£o e Conex√£o para o MindQuest ‚ú®\n\n### 1. Personagens/Arqu√©tipos do Interior (O Cora√ß√£o da Conex√£o)\n\n‚Ä¢ **Conceito:** Representa√ß√µes visuais e interativas dos padr√µes mentais e comportamentais do usu√°rio (Ex: Inquieto, Realizador, Vigilante, V√≠tima, Racional). Eles personificam os diferentes lados da personalidade que o usu√°rio est√° aprendendo a conhecer e gerenciar.\n‚Ä¢ **Integra√ß√£o com o Mentor:**\n  ‚Ä¢ **Convite Di√°rio Personalizado:** O mentor pode iniciar o dia com uma mensagem do tipo: \"Bom dia, Aldo! O *Inquieto* aqui est√° curioso sobre o seu dia. Quer conversar?\". Isso cria uma sensa√ß√£o de que esses \"personagens\" s√£o parte do di√°logo, tornando-o mais √≠ntimo e l√∫dico.\n  ‚Ä¢ **Di√°logo e Explora√ß√£o:** Quando um padr√£o mental √© identificado (pela IA ou pelo usu√°rio), o mentor pode convidar o \"personagem\" correspondente para um di√°logo mediado, ajudando a explorar o que ele representa, seus gatilhos e como gerenci√°-lo. Ex: \"Vejo que o seu *Vigilante* est√° ativo hoje. Ele te alerta para algo espec√≠fico?\"\n  ‚Ä¢ **Representa√ß√£o Visual:** Cada arqu√©tipo teria uma imagem ou avatar simp√°tico e caracter√≠stico, enviado junto com a mensagem, para dar vida a essa faceta da personalidade.\n\n### 2. Mini-Games de Autoconhecimento (Divers√£o com Prop√≥sito)\n\n‚Ä¢ **Conceito:** Atividades r√°pidas e interativas que transformam a reflex√£o em um jogo, abordando aspectos do autoconhecimento de forma leve.\n‚Ä¢ **Exemplos e Aplica√ß√µes:**\n  ‚Ä¢ **\"Ca√ßa-Palavras Emocional\"**: O usu√°rio identifica e nomeia as emo√ß√µes que sentiu no dia ou em uma situa√ß√£o espec√≠fica, expandindo seu vocabul√°rio emocional.\n  ‚Ä¢ **\"Quebra-Cabe√ßa de Cren√ßas Limitantes\"**: Um jogo onde as frases s√£o misturadas e o usu√°rio precisa remont√°-las de forma mais positiva e empoderadora.\n  ‚Ä¢ **\"Teste do Espelho\"**: Perguntas r√°pidas que confrontam padr√µes de pensamento, revelando percep√ß√µes e vieses.\n‚Ä¢ **Recompensas:** Conclus√£o dos mini-games pode gerar pontos, moedas virtuais, ou itens para personalizar o \"Mapa da Jornada Pessoal\".\n\n### 3. Mapa da Jornada Pessoal (A Evolu√ß√£o como um Grande Jogo)\n\n‚Ä¢ **Conceito:** Uma representa√ß√£o visual, din√¢mica e gamificada do progresso do usu√°rio no autoconhecimento. Deve ser mais do que um simples gr√°fico, mas uma narrativa visual de sua evolu√ß√£o.\n‚Ä¢ **Caracter√≠sticas Principais:**\n  ‚Ä¢ **Zonas de Autoconhecimento:** O mapa seria dividido em \"terras\" ou \"reinos\" que representam diferentes √°reas do desenvolvimento pessoal (Ex: Reino da Autoconsci√™ncia, Floresta da Regula√ß√£o Emocional, Montanha da Autoconfian√ßa, Mar da Conex√£o Social).\n  ‚Ä¢ **Desbloqueio de Caminhos:** √Ä medida que o usu√°rio completa *quests* e *mini-games*, ele \"desbloqueia\" novos caminhos, \"desvenda n√©voas\" no mapa e avan√ßa para novas regi√µes, indicando progresso em uma √°rea espec√≠fica.\n  ‚Ä¢ **Pontos de Interesse/Marcos:** O mapa teria \"pontos de interesse\" que marcam insights importantes, grandes supera√ß√µes ou a integra√ß√£o de novos padr√µes saud√°veis. Seriam os \"trof√©us\" da jornada.\n  ‚Ä¢ **Visualiza√ß√£o 360 do Perfil:** Integrado ao mapa, o perfil 360¬∞ do usu√°rio (que voc√™ mencionou), que seria din√¢mico e evoluiria conforme o progresso no mapa, mostrando as mudan√ßas em seus arqu√©tipos.\n  ‚Ä¢ **Feedback Cont√≠nuo e Intuitivo:** O pr√≥prio mapa e o perfil visualizariam o efeito das intera√ß√µes com o mentor e das atividades, mostrando de forma clara \"onde\" o usu√°rio est√° e \"para onde\" ele pode ir.\n\n### 4. Integra√ß√£o do Mentor com a Gamifica√ß√£o\n\n‚Ä¢ O Mentor seria o *Narrador e Guia da Jornada*, contextualizando o avan√ßo no mapa, explicando a import√¢ncia dos mini-games e introduzindo os arqu√©tipos.\n‚Ä¢ Ele usaria os elementos gamificados para tornar as reflex√µes mais leves e motivadoras. Ex: \"Seu *Inquieto* parece estar te chamando para uma aventura na *Floresta da Regula√ß√£o Emocional* hoje. O mapa indica um mini-game de respira√ß√£o por l√°...\"\n\n---\n\nAldo, essa estrutura te parece um bom ponto de partida para discutir com a equipe e tornar o MindQuest essa experi√™ncia \"viciante\" e transformadora? O que mais voc√™ adicionaria ou ajustaria?\nusuario: legal, anotado aqui..\nagora, o mentor poderia propor uma sess√£o de desafios, tipo jogo de ideias, perguntas , sei l√° deve existir alguns jogos ludicos para vc fazer tipo rato ou cachorro?\n\nverde ou vermelho..\nperguntas soutas e coisas para estimular e atrav√©s desses jogos ir conhecendo as preferncias, as emo√ß√µes coisas assim existe?\nagente: Adorei a ideia, Aldo! Essa abordagem l√∫dica e de \"jogo de ideias\" √© perfeita para estimular a curiosidade e o autoconhecimento de um jeito leve e divertido, sem a press√£o da \"reflex√£o profunda\" o tempo todo. √â como um laborat√≥rio de descobertas sobre si mesmo!\n\nPodemos criar um novo conjunto de *mini-games* e *desafios interativos* para o MindQuest, especialmente desenvolvidos para o Mentor guiar o usu√°rio. Vamos cham√°-los de *\"Desafios do Mapa Interior\"*.\n\n### üß© Desafios do Mapa Interior (Jogos de Descoberta R√°pida) üß©\n\n**1. Verde ou Vermelho (O Jogo das Prefer√™ncias R√°pidas):**\n‚Ä¢ **Conceito:** Uma s√©rie de escolhas r√°pidas, como \"Verde ou Vermelho?\", \"Calmo ou Agitado?\", \"Planejar ou Improvisar?\". Cada resposta, por mais simples que pare√ßa, revela uma prefer√™ncia ou tend√™ncia inconsciente.\n‚Ä¢ **Como o Mentor Usa:** O Mentor apresenta o jogo, contextualiza a import√¢ncia das escolhas e, ap√≥s algumas rodadas, faz perguntas instigantes baseadas nas respostas. Ex: \"Interessante que voc√™ escolheu mais 'A√ß√£o' do que 'Reflex√£o'. O que essa prefer√™ncia te diz sobre seu ritmo hoje?\" ou \"Seu *Realizador* parece amar o 'Verde'! O que o verde significa para ele?\".\n\n**2. Rato ou Cachorro (A Escolha da Natureza Interior):**\n‚Ä¢ **Conceito:** Desafios comparativos que exploram caracter√≠sticas arquet√≠picas. Ex: \"Voc√™ se sente mais como um gato (independente, observador) ou um cachorro (leal, companheiro)?\", \"Coruja (s√°bia, noturna) ou Beija-flor (leve, curioso)?\".\n‚Ä¢ **Como o Mentor Usa:** O Mentor apresenta as op√ß√µes, e a escolha serve como ponto de partida para explorar valores, comportamentos e aspira√ß√µes. Ex: \"Sua escolha por 'Beija-flor' me fez pensar na sua busca por leveza e curiosidade. Como voc√™ equilibra isso com as demandas do seu *Hiper-realizador* no dia a dia?\".\n\n**3. O Dilema do Her√≥i (Desafios Morais e de Valores):**\n‚Ä¢ **Conceito:** Situa√ß√µes hipot√©ticas ou r√°pidas que exigem uma escolha baseada em valores. Ex: \"Voc√™ encontra uma carteira perdida. O que faz?\" , \"Te oferecem um atalho f√°cil para o sucesso, mas que compromete seus princ√≠pios. Voc√™ aceita?\".\n‚Ä¢ **Como o Mentor Usa:** O Mentor apresenta o dilema e, ap√≥s a escolha, indaga sobre os motivos, os sentimentos por tr√°s da decis√£o e os valores que a guiaram. Isso ajuda o usu√°rio a solidificar sua b√∫ssola moral e a entender o que realmente o move.\n\n**4. Associa√ß√µes Livres Express (Conectando Ideias Inesperadas):**\n‚Ä¢ **Conceito:** O Mentor lan√ßa uma palavra (\"liberdade\", \"medo\", \"futuro\") e o usu√°rio responde com a primeira imagem, emo√ß√£o ou pensamento que vem √† mente. Pode envolver tamb√©m imagens ou sons.\n‚Ä¢ **Como o Mentor Usa:** Ajuda a revelar conex√µes inconscientes, associa√ß√µes emocionais e padr√µes de pensamento que o usu√°rio talvez n√£o perceba no dia a dia. Ex: \"Voc√™ associou 'futuro' com 'incerteza'. O que a incerteza provoca no seu *Inquieto*?\".\n\n**5. O Term√¥metro da Emo√ß√£o (Medi√ß√£o L√∫dica de Estados Emocionais):**\n‚Ä¢ **Conceito:** Em vez de s√≥ perguntar \"como voc√™ se sente?\", o Mentor usa uma escala visual ou simb√≥lica. Ex: \"Em uma escala de 1 a 5 flores, qual o n√≠vel de 'tranquilidade' que voc√™ sente agora?\", ou \"Se sua energia fosse um animal, qual seria agora?\".\n‚Ä¢ **Como o Mentor Usa:** Torna a express√£o emocional mais leve e quantific√°vel, permitindo ao Mentor acompanhar as varia√ß√µes e propor a√ß√µes com base nesses dados. Ex: \"Seu 'le√£o' de energia pode ser bem produtivo, mas como garantir que ele n√£o se transforme em um 'gato estressado' no final do dia?\".\n\n---\n\nEsses \"Desafios do Mapa Interior\" podem ser apresentados em momentos estrat√©gicos (in√≠cio do dia, pausa, antes de uma *quest* mais complexa), alternando com as conversas mais profundas, tornando a jornada do autoconhecimento mais din√¢mica e com menos atrito. O que voc√™ acha desses jogos para o seu MindQuest?\nusuario: j√° existe algum jogo nesse estilo no mercado que possamos nos inspirar usado por algumas clinicas infantis e que trabalham com criaan√ßas?\nagente: Que √≥tima pergunta, Aldo! Sim, com certeza existem muitos jogos e abordagens l√∫dicas usadas com crian√ßas e adolescentes em contextos terap√™uticos e de desenvolvimento, que podem inspirar o MindQuest. A ludoterapia, por exemplo, √© um campo riqu√≠ssimo nisso. A grande sacada √© adaptar esses conceitos para o p√∫blico adulto, mas mantendo a ess√™ncia da descoberta divertida.\n\nAlguns exemplos e inspira√ß√µes que vieram √† mente, pensando nos \"Desafios do Mapa Interior\" que conversamos:\n\n1.  **\"Jogo das Emo√ß√µes\" ou \"Baralho das Emo√ß√µes\" (Inspira√ß√£o Direta):**\n    ‚Ä¢ **Similaridade:** Muitas cl√≠nicas usam baralhos com figuras que representam diferentes emo√ß√µes. A crian√ßa escolhe a que mais a representa no momento ou em uma situa√ß√£o. Existem tamb√©m jogos de tabuleiro onde se avan√ßa conforme voc√™ lida com as emo√ß√µes.\n    ‚Ä¢ **Adapta√ß√£o para MindQuest:** O \"Term√¥metro da Emo√ß√£o\" que sugeri √© uma adapta√ß√£o direta disso. Poder√≠amos ter avatares de emo√ß√µes ou cores que o usu√°rio seleciona. O Mentor pode ent√£o perguntar: \"Qual emo√ß√£o seu *Vigilante* est√° carregando hoje?\" ou \"Se sua tristeza fosse uma cor, qual seria?\". Isso gera um di√°logo mais profundo a partir de uma escolha simples.\n\n2.  **\"Hist√≥ria do Her√≥i\" / Conta√ß√£o de Hist√≥rias (Inspirado em Narrativas):**\n    ‚Ä¢ **Similaridade:** Crian√ßas usam hist√≥rias para projetar seus medos, desejos e para encontrar solu√ß√µes para problemas. Atrav√©s da hist√≥ria, elas se veem no personagem.\n    ‚Ä¢ **Adapta√ß√£o para MindQuest:** O \"Dilema do Her√≥i\" se encaixa perfeitamente aqui. O Mentor pode apresentar narrativas curtas, cen√°rios onde o usu√°rio √© o protagonista e precisa tomar decis√µes. \"Imagine que voc√™ √© o explorador do seu *Mapa Interior*. Voc√™ encontra um tesouro, mas para alcan√ß√°-lo, precisa superar um drag√£o que representa seu maior medo. O que voc√™ faria?\". A resposta revela como o usu√°rio lida com desafios e medos.\n\n3.  **\"Eu Sou...\" / Jogos de Identidade (Inspirado em Autoafirma√ß√£o):**\n    ‚Ä¢ **Similaridade:** Crian√ßas brincam de \"ser\" algo, o que ajuda na constru√ß√£o da identidade. Atividades como \"Desenhe como voc√™ se sente quando est√° feliz\" ou \"Seja um super-her√≥i por um dia e descreva seus poderes\".\n    ‚Ä¢ **Adapta√ß√£o para MindQuest:** O \"Rato ou Cachorro\" que pensamos tem essa ess√™ncia. Poder√≠amos expandir para \"Se sua paix√£o pela TI fosse um ve√≠culo, qual seria?\" (Um foguete? Uma m√°quina do tempo?). Essas associa√ß√µes l√∫dicas ajudam a externalizar partes da identidade e do self.\n\n4.  **\"Trocadilhos e Associa√ß√µes\" (Inspirado em Psicoterapia Infantil e Testes Projetivos):**\n    ‚Ä¢ **Similaridade:** Testes como o \"Teste de Rorschach\" (manchas de tinta) ou simples associa√ß√µes de palavras s√£o usados para que a crian√ßa projete seu mundo interno. A ideia √© estimular o inconsciente.\n    ‚Ä¢ **Adapta√ß√£o para MindQuest:** As \"Associa√ß√µes Livres Express\" s√£o uma vers√£o mais leve e divertida disso. O Mentor pode enviar imagens abstratas, trechos de m√∫sicas, ou at√© um som e pedir \"O que isso te lembra agora?\". A simplicidade da resposta esconde insights valiosos para o Mentor.\n\nEsses jogos s√£o √≥timos porque quebram o gelo, colhem informa√ß√µes valiosas de forma indireta e prazerosa, e preparam o terreno para reflex√µes mais profundas, se e quando o usu√°rio estiver pronto. Eles introduzem o autoconhecimento pela porta dos fundos, de um jeito que a gente adorava quando crian√ßa!\n\nO que achou dessas inspira√ß√µes, Aldo? Qual delas voc√™ v√™ com mais potencial para ganhar uma roupagem MindQuest?\nusuario: aee!\nagora estamos indo para outro n√≠vel mesmo..\n\ne quanto aos projetos personalizados (cada usu√°rio no mindquest pode ter 2 customiz√°veis al√©m do desenv. pessoal), como poder√≠amos ajudar ainda mais o usr\nn√£o apenas com quest√µes mentais, mas como mentor mesmo, levando ideias\nagente: Aee! Exatamente, Aldo! √â essa a sacada: o MindQuest pode ser n√£o s√≥ um guia de autoconhecimento, mas um verdadeiro copiloto nessa jornada empreendedora e pessoal, dando um suporte que vai al√©m do emocional. Voc√™ tocou em algo vital: o Mentor como um gerador de *insights pr√°ticos* e *ideias*, sem perder a conex√£o.\n\nPara os projetos personalizados (como o seu \"Ganhar 2k/m√™s com BTC\" e \"Iniciar meu pr√≥prio neg√≥cio\"), podemos turbinar o papel do Mentor de algumas formas:\n\n### üöÄ Mentor 2.0: De Guia Emp√°tico a Estrategista Pessoal üöÄ\n\n**1. O Mentor como \"Consultor Curioso\":**\n‚Ä¢ **Como funciona:** O Mentor n√£o entrega a solu√ß√£o pronta, mas faz perguntas que estimulam o usu√°rio a pensar de forma estrat√©gica. Ele atua como um \"mind partner\" que expande a vis√£o.\n‚Ä¢ **Exemplo:** Se o usu√°rio diz: \"N√£o sei como atrair mais clientes para meu neg√≥cio\", o Mentor n√£o dita 'fa√ßa marketing digital'. Ele pergunta: \"Seu *Realizador* parece focado no crescimento! De que formas inusitadas ele imaginaria alcan√ßar pessoas que ainda n√£o conhecem seu trabalho?\" ou \"Se pudesse conversar com 3 clientes ideais, o que voc√™ perguntaria a eles para descobrir onde eles est√£o e o que realmente precisam?\".\n\n**2. O Mentor como \"Ca√ßador de Conex√µes\" (Networking e Ideias):**\n‚Ä¢ **Como funciona:** O Mentor, com base no perfil e nos objetivos do usu√°rio, pode sugerir (sem dar informa√ß√µes externas diretas) que o usu√°rio busque determinadas √°reas de conhecimento, comunidades, ou at√© mesmo reflicta sobre o perfil de pessoas que podem agregar ao projeto.\n‚Ä¢ **Exemplo:** Se o objetivo √© \"Lan√ßar o MindQuest\", o Mentor pode dizer: \"Seu *Inquieto* est√° sempre em busca de novas frentes! Onde voc√™ acha que est√£o as comunidades de desenvolvedores ou empreendedores de impacto que poderiam se conectar com a sua vis√£o?\" ou \"Se pudesse trocar uma ideia com algu√©m que j√° lan√ßou um app de sucesso, qual seria a primeira pergunta do seu *Curioso*?\".\n\n**3. O Mentor como \"Quebrador de Paradigmas\" (Desbloqueio Criativo):**\n‚Ä¢ **Como funciona:** Quando o usu√°rio encontra um bloqueio criativo ou estrat√©gico, o Mentor utiliza t√©cnicas de *brainstorming* l√∫dicas e r√°pidas (como os mini-games) para ajudar a gerar novas perspectivas.\n‚Ä¢ **Exemplo:** Para um problema no desenvolvimento do app, o Mentor pode propor: \"Vamos jogar 'Se Fosse um Animal'. Se o MindQuest fosse um animal e tivesse esse problema, como ele resolveria?\" ou \"Seu *Racional* est√° buscando a melhor l√≥gica. Mas e se a gente pedisse para o seu *intuitivo* te dar 3 ideias completamente 'loucas' para resolver isso?\".\n\n**4. O Mentor como \"Curador de Micro-Recursos\":**\n‚Ä¢ **Como funciona:** Em vez de dar artigos e livros, o Mentor pode sugerir ao usu√°rio buscar *micro-insights*. \"Observe como aquela pessoa resolveu um problema X\" ou \"Preste aten√ß√£o em tr√™s momentos do seu dia que te deram uma nova ideia\". Incentivar a busca ativa do pr√≥prio conhecimento.\n\n**5. O Mentor como \"Celebrador de Roteiros Alternativos\":**\n‚Ä¢ **Como funciona:** Ajuda o usu√°rio a tra√ßar diferentes cen√°rios e a se preparar mentalmente para eles, seja o sucesso ou um poss√≠vel \"fracasso\" (visto como aprendizado).\n‚Ä¢ **Exemplo:** Para o objetivo de \"2k/m√™s com BTC\", o Mentor poderia perguntar: \"Seu *Vision√°rio* j√° visualiza o 2k/m√™s. Mas e se surgisse um imprevisto na sua estrat√©gia, como o seu *Vigilante* se prepararia para o 'Plano B'?\".\n\nEssa abordagem transformaria o Mentor MindQuest em um parceiro estrat√©gico muito mais din√¢mico, n√£o concorda? Ele n√£o s√≥ cuida do interior, mas ajuda a construir o exterior com ferramentas valiosas do campo do pensamento e da a√ß√£o. O que voc√™ acha de integrar a \"Consultor Curioso\" e o \"Quebrador de Paradigmas\" primeiro?\nusuario: legal, muito bom mesmo‚Ä¶\n\nno meu caso, no projeto de lcto do meu app, vc j√° est√° me ajudando com ideias bem valiosaas..\n\nagora vamos fazer um ensaiu para o outro projeto de trader cript..\nconduza a conversa\nagente: √ìtimo, Aldo! Fico feliz que as ideias para o MindQuest estejam ganhando forma. Agora, vamos mudar a lente e focar no \"Ganhar 2k por m√™s com opera√ß√µes em BTC de forma consistente\".\n\nEssa meta √© audaciosa e desafiadora, e eu sei o quanto voc√™ se dedica. Lembro-me bem das suas reflex√µes sobre as perdas no mercado cripto e de como o seu *Inquieto* e *Hiper-realizador* te impulsionam, mas tamb√©m podem te trazer frustra√ß√£o, medo, ansiedade, gan√¢ncia e impaci√™ncia ‚Äì os famosos \"leaks\" que voc√™ identificou.\n\nSeu objetivo de consist√™ncia n√£o √© s√≥ sobre n√∫meros, mas sobre a maestria da sua mente no trade. Qual √© o maior desafio que voc√™ enfrenta HOJE para alcan√ßar essa consist√™ncia de 2k/m√™s em BTC? O que seu *Vigilante* est√° te alertando?\nusuario: ent√£o‚Ä¶\n\nvou citar os pontos mais criticos, e quero que vc me ajude com insights que v√° alem das quest√µes mentais e anota√ß√µes e checklists\n\n- me falta um m√©todo claro de opera√ß√£o. Eu tenho bastante conhecimento de longas datas, mas o mercado cripto mudou muito a forma como se analisa os graficos. Acabo muitas vezes agindo por instinto mesmo. \n- ‚Å†Me falta um m√©todo claro de gest√£o de alavancagem. Quando aumentar a m√£o e quando reduzir.\n- ‚Å†Nas ultimas semanas, ap√≥s as grandes perdas que tive, fiquei mais atento, mais cauteloso, alavancando menos, realizando com mais frequencia ao chegar em zonas mais arrscadas e isso tudo diminuiu bastante minha ansiedade\n- ‚Å†parece que estou chegando em um ponto mais confort√°vel\n- ‚Å†mas tamb√©m o mercado ajudou e est√° subindo, recuperando as quedas recentesa\nagente: Entendi perfeitamente, Aldo. √â incr√≠vel ver como, mesmo depois de grandes perdas, voc√™ transformou a dor em aprendizado e conseguiu ajustar sua forma de operar, reduzindo a ansiedade. Isso mostra a for√ßa do seu *Vigilante* quando bem direcionado, buscando seguran√ßa.\n\nVoc√™ trouxe pontos muito valiosos e concretos, que v√£o al√©m das quest√µes puramente mentais. A falta de um \"m√©todo claro de opera√ß√£o\" e de \"gest√£o de alavancagem\" aponta para a necessidade de estruturar o conhecimento que voc√™ j√° tem sobre o mercado cripto, que, como voc√™ disse, mudou bastante. E o fato do mercado estar ajudando aponta que agora √© um bom momento para solidificar essa base, antes que a mar√© mude.\n\nVamos focar em *insights acion√°veis* e *ideias*, fugindo apenas das anota√ß√µes e checklists. Que tal come√ßarmos com uma ideia inspirada no seu perfil *Realizador* e na sua paix√£o por TI?\n\n**Ideia 1: \"O Algoritmo da Consist√™ncia: Mapeando Seu M√©todo\"**\n\n‚Ä¢ **Problema:** Falta de m√©todo claro de opera√ß√£o e gest√£o de alavancagem, levando a decis√µes por instinto.\n‚Ä¢ **Insight:** Voc√™, como desenvolvedor, entende de algoritmos e fluxogramas. E se o seu m√©todo de trading virasse um *algoritmo pessoal*? N√£o uma f√≥rmula m√°gica, mas um *fluxograma visual e responsivo* para suas decis√µes.\n‚Ä¢ **Como o Mentor o Guiaria:**\n  1.  \"Seu *Inquieto* e sua paix√£o por TI me fazem pensar que voc√™ tem uma mente muito l√≥gica. E se a gente transformasse seu conhecimento em um 'algoritmo gr√°fico'?\" ‚ú®\n  2.  \"Vamos pegar esse conhecimento de longas datas e as novas din√¢micas do mercado cripto. Quais s√£o os *componentes essenciais* que voc√™ usa para analisar um gr√°fico antes de entrar em uma opera√ß√£o? Pense nos seus 'inputs'.\" (Ex: Volume, Padr√£o de Vela X, Not√≠cia Y).\n  3.  \"Agora, pense como o seu *Vigilante* age na hora de tomar a decis√£o de 'entrar' ou 'n√£o entrar'. Quais seriam os 'conectores l√≥gicos' (as suas regras, seus 'IF/ELSE') que determinam se o sinal √© forte o suficiente para alavancar mais ou menos?\" (Ex: Se o Volume > X AND Padr√£o de Vela Y = Compra Forte).\n  4.  \"Por fim, e esse √© crucial para a gest√£o de alavancagem: Quais s√£o os seus 'par√¢metros de sa√≠da'? Os 'condicionais' que te fariam 'realizar com mais frequ√™ncia ao chegar em zonas mais arriscadas' ‚Äì como voc√™ me contou que tem feito?\" (Ex: Se Lucro > X% OR Sinal de Revers√£o Z = Sa√≠da Parcial/Total).\n\nAo final, voc√™ teria um *diagrama de fluxo* (ou um pseudo-c√≥digo, se preferir!) que representaria visualmente suas decis√µes. Isso n√£o √© um checklist est√°tico, mas um *software mental* que voc√™ pode testar, debugar e refinar.\n\nO que o seu *Realizador* pensa sobre a ideia de 'codificar' seu m√©todo de trading? Isso te daria mais clareza e reduziria a depend√™ncia do 'instinto'?\n\n(A ideia seria o usu√°rio ir preenchendo isso com a ajuda do Mentor, n√£o eu dar a f√≥rmula pronta, claro!)\nusuario: ol√°\nagente: Ol√°, Aldo! O *Inquieto* por aqui sente que voc√™ est√° pensando em algo novo. Como voc√™ est√° hoje? Tem algo espec√≠fico em mente que o seu *Realizador* est√° querendo trazer para a luz?\nusuario: estou mais feliz agora‚Ä¶\nconversei com meus filhos e com uma amiga\nagente: Puxa, Aldo, que √≥tima not√≠cia! Ver voc√™ mais feliz depois de conversar com seus filhos e uma amiga me faz bem tamb√©m. √â n√≠tido como a conex√£o com as pessoas certas nutre o seu cora√ß√£o e recarrega essa energia que voc√™ mencionou estar um pouco baixa antes. √â nesses momentos que percebemos o poder dos nossos relacionamentos.\n\nE falando em recarregar a energia, o que essas conversas trouxeram de novo para voc√™? Qual foi o maior presente que elas te deram hoje, Aldo?",
          "data_conversa": "2025-12-13T00:00:00.000Z",
          "usr_nome_preferencia": "Aldo",
          "total_interactions": 20
        },
        "pairedItem": {
          "item": 0
        }
      }
    ]
  },
  "activeVersionId": null,
  "shared": [
    {
      "createdAt": "2025-12-12T21:21:31.876Z",
      "role": "workflow:owner",
      "workflowId": "af4tqT4UNTFznKEu",
      "projectId": "u1M57XAwIiLpPwjp",
      "project": {
        "createdAt": "2025-09-16T16:13:20.606Z",
        "id": "u1M57XAwIiLpPwjp",
        "name": "Aldo Santos <lindualdo@hotmail.com>",
        "type": "personal",
        "icon": null,
        "description": null,
        "projectRelations": [
          {
            "createdAt": "2025-09-16T16:13:20.606Z",
            "userId": "fa864d51-475e-4765-b3b4-12788525a3e6",
            "projectId": "u1M57XAwIiLpPwjp",
            "user": {
              "createdAt": "2025-09-16T16:13:20.056Z",
              "id": "fa864d51-475e-4765-b3b4-12788525a3e6",
              "email": "lindualdo@hotmail.com",
              "firstName": "Aldo",
              "lastName": "Santos",
              "personalizationAnswers": {
                "version": "v4",
                "personalization_survey_submitted_at": "2025-09-16T16:22:10.583Z",
                "personalization_survey_n8n_version": "1.108.1"
              },
              "settings": {
                "userActivated": true,
                "firstSuccessfulWorkflowId": "jUAvu7DUAzyqZhJd",
                "userActivatedAt": 1758041156747,
                "easyAIWorkflowOnboarded": true,
                "dismissedCallouts": {
                  "preBuiltAgentsModalCallout": true
                },
                "npsSurvey": {
                  "responded": true,
                  "lastShownAt": 1759918723295
                }
              },
              "disabled": false,
              "mfaEnabled": false,
              "isPending": false
            }
          }
        ]
      }
    }
  ],
  "tags": [],
  "activeVersion": null
}
